import{i as Te,A as xi,B as Qe,C as Di,c as ci,d as dt,D as ui,e as bt,F as Li,G as Ai,v as di,g as fi,n as zi,r as G,H as Oi,I as Ni,J as Vi,K as $i,L as Ri,M as Pi,N as Fi,_ as hi,E as ye,h as Ce,O as Mi,w as vi,m as Ui,P as Hi,z as mi,x as we,Q as Bi,R as Wi,S as Yi,T as Xi,U as qi}from"./el-message-f1eff6fd.js";import{d as at,a4 as Dt,r as N,a5 as ji,s as Ki,c as O,w as le,y as et,o as ce,f as _,h as re,x as y,j as R,l as T,n as M,u as v,m as ft,W as se,D as U,q as S,F as he,C as Gi,a3 as tt,k as ee,v as ge,B as De,T as pi,L as gi,a6 as Zi,P as ve,J as ht,a7 as Ji,i as Qi,$ as en,_ as it,e as vt,R as yt,a0 as _i,p as tn,a1 as Et}from"./index-eae548bf.js";import{u as nn,a as an}from"./useFetch-9497c203.js";import{F as st,e as sn,f as on,V as rn,g as ln,h as cn,i as un,j as dn}from"./api-14118a8e.js";import{u as fn,g as wi,t as hn,_ as vn,d as mn,b as bi,a as Tt}from"./el-switch-9d6336cd.js";import{c as Me,E as pn}from"./el-notification-4c7d7cb3.js";/* empty css                */const gn=(n,e)=>{if(!Te||!n||!e)return!1;const i=n.getBoundingClientRect();let t;return e instanceof Element?t=e.getBoundingClientRect():t={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},i.top<t.bottom&&i.bottom>t.top&&i.right>t.left&&i.left<t.right},Lt=n=>{let e=0,i=n;for(;i;)e+=i.offsetTop,i=i.offsetParent;return e},_n=(n,e)=>Math.abs(Lt(n)-Lt(e));var wn=/\s/;function bn(n){for(var e=n.length;e--&&wn.test(n.charAt(e)););return e}var yn=/^\s+/;function En(n){return n&&n.slice(0,bn(n)+1).replace(yn,"")}var At=0/0,Tn=/^[-+]0x[0-9a-f]+$/i,kn=/^0b[01]+$/i,Cn=/^0o[0-7]+$/i,In=parseInt;function zt(n){if(typeof n=="number")return n;if(xi(n))return At;if(Qe(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Qe(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=En(n);var i=kn.test(n);return i||Cn.test(n)?In(n.slice(2),i?2:8):Tn.test(n)?At:+n}var Sn=function(){return Di.Date.now()};const rt=Sn;var xn="Expected a function",Dn=Math.max,Ln=Math.min;function An(n,e,i){var t,a,s,o,r,c,u=0,l=!1,d=!1,f=!0;if(typeof n!="function")throw new TypeError(xn);e=zt(e)||0,Qe(i)&&(l=!!i.leading,d="maxWait"in i,s=d?Dn(zt(i.maxWait)||0,e):s,f="trailing"in i?!!i.trailing:f);function h(x){var z=t,q=a;return t=a=void 0,u=x,o=n.apply(q,z),o}function p(x){return u=x,r=setTimeout(b,e),l?h(x):o}function g(x){var z=x-c,q=x-u,j=e-z;return d?Ln(j,s-q):j}function C(x){var z=x-c,q=x-u;return c===void 0||z>=e||z<0||d&&q>=s}function b(){var x=rt();if(C(x))return w(x);r=setTimeout(b,g(x))}function w(x){return r=void 0,f&&t?h(x):(t=a=void 0,o)}function E(){r!==void 0&&clearTimeout(r),u=0,t=c=a=r=void 0}function H(){return r===void 0?o:w(rt())}function B(){var x=rt(),z=C(x);if(t=arguments,a=this,c=x,z){if(r===void 0)return p(c);if(d)return clearTimeout(r),r=setTimeout(b,e),h(c)}return r===void 0&&(r=setTimeout(b,e)),o}return B.cancel=E,B.flush=H,B}var zn="Expected a function";function Pe(n,e,i){var t=!0,a=!0;if(typeof n!="function")throw new TypeError(zn);return Qe(i)&&(t="leading"in i?!!i.leading:t,a="trailing"in i?!!i.trailing:a),An(n,e,{leading:t,maxWait:e,trailing:a})}const On=ci({urlList:{type:dt(Array),default:()=>ui([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),Nn={close:()=>!0,switch:n=>bt(n)},Vn=["src"],$n=at({name:"ElImageViewer"}),Rn=at({...$n,props:On,emits:Nn,setup(n,{expose:e,emit:i}){const t=n,a={CONTAIN:{name:"contain",icon:Dt(Li)},ORIGINAL:{name:"original",icon:Dt(Ai)}},{t:s}=di(),o=fi("image-viewer"),{nextZIndex:r}=zi(),c=N(),u=N([]),l=ji(),d=N(!0),f=N(t.initialIndex),h=Ki(a.CONTAIN),p=N({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),g=O(()=>{const{urlList:m}=t;return m.length<=1}),C=O(()=>f.value===0),b=O(()=>f.value===t.urlList.length-1),w=O(()=>t.urlList[f.value]),E=O(()=>{const{scale:m,deg:L,offsetX:F,offsetY:J,enableTransition:de}=p.value;let ie=F/m,fe=J/m;switch(L%360){case 90:case-270:[ie,fe]=[fe,-ie];break;case 180:case-180:[ie,fe]=[-ie,-fe];break;case 270:case-90:[ie,fe]=[-fe,ie];break}const be={transform:`scale(${m}) rotate(${L}deg) translate(${ie}px, ${fe}px)`,transition:de?"transform .3s":""};return h.value.name===a.CONTAIN.name&&(be.maxWidth=be.maxHeight="100%"),be}),H=O(()=>bt(t.zIndex)?t.zIndex:r());function B(){z(),i("close")}function x(){const m=Pe(F=>{switch(F.code){case ye.esc:t.closeOnPressEscape&&B();break;case ye.space:Ve();break;case ye.left:We();break;case ye.up:ue("zoomIn");break;case ye.right:Ye();break;case ye.down:ue("zoomOut");break}}),L=Pe(F=>{const J=F.deltaY||F.deltaX;ue(J<0?"zoomIn":"zoomOut",{zoomRate:t.zoomRate,enableTransition:!1})});l.run(()=>{Ce(document,"keydown",m),Ce(document,"wheel",L)})}function z(){l.stop()}function q(){d.value=!1}function j(m){d.value=!1,m.target.alt=s("el.image.error")}function K(m){if(d.value||m.button!==0||!c.value)return;p.value.enableTransition=!1;const{offsetX:L,offsetY:F}=p.value,J=m.pageX,de=m.pageY,ie=Pe(be=>{p.value={...p.value,offsetX:L+be.pageX-J,offsetY:F+be.pageY-de}}),fe=Ce(document,"mousemove",ie);Ce(document,"mouseup",()=>{fe()}),m.preventDefault()}function Ne(){p.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function Ve(){if(d.value)return;const m=Mi(a),L=Object.values(a),F=h.value.name,de=(L.findIndex(ie=>ie.name===F)+1)%m.length;h.value=a[m[de]],Ne()}function $e(m){const L=t.urlList.length;f.value=(m+L)%L}function We(){C.value&&!t.infinite||$e(f.value-1)}function Ye(){b.value&&!t.infinite||$e(f.value+1)}function ue(m,L={}){if(d.value)return;const{zoomRate:F,rotateDeg:J,enableTransition:de}={zoomRate:t.zoomRate,rotateDeg:90,enableTransition:!0,...L};switch(m){case"zoomOut":p.value.scale>.2&&(p.value.scale=Number.parseFloat((p.value.scale/F).toFixed(3)));break;case"zoomIn":p.value.scale<7&&(p.value.scale=Number.parseFloat((p.value.scale*F).toFixed(3)));break;case"clockwise":p.value.deg+=J;break;case"anticlockwise":p.value.deg-=J;break}p.value.enableTransition=de}return le(w,()=>{et(()=>{const m=u.value[0];m!=null&&m.complete||(d.value=!0)})}),le(f,m=>{Ne(),i("switch",m)}),ce(()=>{var m,L;x(),(L=(m=c.value)==null?void 0:m.focus)==null||L.call(m)}),e({setActiveItem:$e}),(m,L)=>(_(),re(gi,{to:"body",disabled:!m.teleported},[y(pi,{name:"viewer-fade",appear:""},{default:R(()=>[T("div",{ref_key:"wrapper",ref:c,tabindex:-1,class:M(v(o).e("wrapper")),style:ft({zIndex:v(H)})},[T("div",{class:M(v(o).e("mask")),onClick:L[0]||(L[0]=se(F=>m.hideOnClickModal&&B(),["self"]))},null,2),U(" CLOSE "),T("span",{class:M([v(o).e("btn"),v(o).e("close")]),onClick:B},[y(v(G),null,{default:R(()=>[y(v(Oi))]),_:1})],2),U(" ARROW "),v(g)?U("v-if",!0):(_(),S(he,{key:0},[T("span",{class:M([v(o).e("btn"),v(o).e("prev"),v(o).is("disabled",!m.infinite&&v(C))]),onClick:We},[y(v(G),null,{default:R(()=>[y(v(Ni))]),_:1})],2),T("span",{class:M([v(o).e("btn"),v(o).e("next"),v(o).is("disabled",!m.infinite&&v(b))]),onClick:Ye},[y(v(G),null,{default:R(()=>[y(v(Vi))]),_:1})],2)],64)),U(" ACTIONS "),T("div",{class:M([v(o).e("btn"),v(o).e("actions")])},[T("div",{class:M(v(o).e("actions__inner"))},[y(v(G),{onClick:L[1]||(L[1]=F=>ue("zoomOut"))},{default:R(()=>[y(v($i))]),_:1}),y(v(G),{onClick:L[2]||(L[2]=F=>ue("zoomIn"))},{default:R(()=>[y(v(Ri))]),_:1}),T("i",{class:M(v(o).e("actions__divider"))},null,2),y(v(G),{onClick:Ve},{default:R(()=>[(_(),re(Gi(v(h).icon)))]),_:1}),T("i",{class:M(v(o).e("actions__divider"))},null,2),y(v(G),{onClick:L[3]||(L[3]=F=>ue("anticlockwise"))},{default:R(()=>[y(v(Pi))]),_:1}),y(v(G),{onClick:L[4]||(L[4]=F=>ue("clockwise"))},{default:R(()=>[y(v(Fi))]),_:1})],2)],2),U(" CANVAS "),T("div",{class:M(v(o).e("canvas"))},[(_(!0),S(he,null,tt(m.urlList,(F,J)=>ee((_(),S("img",{ref_for:!0,ref:de=>u.value[J]=de,key:F,src:F,style:ft(v(E)),class:M(v(o).e("img")),onLoad:q,onError:j,onMousedown:K},null,46,Vn)),[[ge,J===f.value]])),128))],2),De(m.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var Pn=hi(Rn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const Fn=vi(Pn),Mn=ci({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:dt([String,Object])},previewSrcList:{type:dt(Array),default:()=>ui([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),Un={load:n=>n instanceof Event,error:n=>n instanceof Event,switch:n=>bt(n),close:()=>!0,show:()=>!0},Hn=["src","loading"],Bn={key:0},Wn=at({name:"ElImage",inheritAttrs:!1}),Yn=at({...Wn,props:Mn,emits:Un,setup(n,{emit:e}){const i=n;let t="";const{t:a}=di(),s=fi("image"),o=Zi(),r=fn(),c=N(),u=N(!1),l=N(!0),d=N(!1),f=N(),h=N(),p=Te&&"loading"in HTMLImageElement.prototype;let g,C;const b=O(()=>o.style),w=O(()=>{const{fit:m}=i;return Te&&m?{objectFit:m}:{}}),E=O(()=>{const{previewSrcList:m}=i;return Array.isArray(m)&&m.length>0}),H=O(()=>{const{previewSrcList:m,initialIndex:L}=i;let F=L;return L>m.length-1&&(F=0),F}),B=O(()=>i.loading==="eager"?!1:!p&&i.loading==="lazy"||i.lazy),x=()=>{Te&&(l.value=!0,u.value=!1,c.value=i.src)};function z(m){l.value=!1,u.value=!1,e("load",m)}function q(m){l.value=!1,u.value=!0,e("error",m)}function j(){gn(f.value,h.value)&&(x(),Ve())}const K=Hi(j,200,!0);async function Ne(){var m;if(!Te)return;await et();const{scrollContainer:L}=i;Ui(L)?h.value=L:Ji(L)&&L!==""?h.value=(m=document.querySelector(L))!=null?m:void 0:f.value&&(h.value=wi(f.value)),h.value&&(g=Ce(h,"scroll",K),setTimeout(()=>j(),100))}function Ve(){!Te||!h.value||!K||(g==null||g(),h.value=void 0)}function $e(m){if(m.ctrlKey){if(m.deltaY<0)return m.preventDefault(),!1;if(m.deltaY>0)return m.preventDefault(),!1}}function We(){E.value&&(C=Ce("wheel",$e,{passive:!1}),t=document.body.style.overflow,document.body.style.overflow="hidden",d.value=!0,e("show"))}function Ye(){C==null||C(),document.body.style.overflow=t,d.value=!1,e("close")}function ue(m){e("switch",m)}return le(()=>i.src,()=>{B.value?(l.value=!0,u.value=!1,Ve(),Ne()):x()}),ce(()=>{B.value?Ne():x()}),(m,L)=>(_(),S("div",{ref_key:"container",ref:f,class:M([v(s).b(),m.$attrs.class]),style:ft(v(b))},[u.value?De(m.$slots,"error",{key:0},()=>[T("div",{class:M(v(s).e("error"))},ve(v(a)("el.image.error")),3)]):(_(),S(he,{key:1},[c.value!==void 0?(_(),S("img",ht({key:0},v(r),{src:c.value,loading:m.loading,style:v(w),class:[v(s).e("inner"),v(E)&&v(s).e("preview"),l.value&&v(s).is("loading")],onClick:We,onLoad:z,onError:q}),null,16,Hn)):U("v-if",!0),l.value?(_(),S("div",{key:1,class:M(v(s).e("wrapper"))},[De(m.$slots,"placeholder",{},()=>[T("div",{class:M(v(s).e("placeholder"))},null,2)])],2)):U("v-if",!0)],64)),v(E)?(_(),S(he,{key:2},[d.value?(_(),re(v(Fn),{key:0,"z-index":m.zIndex,"initial-index":v(H),infinite:m.infinite,"zoom-rate":m.zoomRate,"url-list":m.previewSrcList,"hide-on-click-modal":m.hideOnClickModal,teleported:m.previewTeleported,"close-on-press-escape":m.closeOnPressEscape,onClose:Ye,onSwitch:ue},{default:R(()=>[m.$slots.viewer?(_(),S("div",Bn,[De(m.$slots,"viewer")])):U("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):U("v-if",!0)],64)):U("v-if",!0)],6))}});var Xn=hi(Yn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const qn=vi(Xn),ae="ElInfiniteScroll",jn=50,Kn=200,Gn=0,Zn={delay:{type:Number,default:Kn},distance:{type:Number,default:Gn},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},kt=(n,e)=>Object.entries(Zn).reduce((i,[t,a])=>{var s,o;const{type:r,default:c}=a,u=n.getAttribute(`infinite-scroll-${t}`);let l=(o=(s=e[u])!=null?s:u)!=null?o:c;return l=l==="false"?!1:l,l=r(l),i[t]=Number.isNaN(l)?c:l,i},{}),yi=n=>{const{observer:e}=n[ae];e&&(e.disconnect(),delete n[ae].observer)},Jn=(n,e)=>{const{container:i,containerEl:t,instance:a,observer:s,lastScrollTop:o}=n[ae],{disabled:r,distance:c}=kt(n,a),{clientHeight:u,scrollHeight:l,scrollTop:d}=t,f=d-o;if(n[ae].lastScrollTop=d,s||r||f<0)return;let h=!1;if(i===n)h=l-(u+d)<=c;else{const{clientTop:p,scrollHeight:g}=n,C=_n(n,t);h=d+u>=C+p+g-c}h&&e.call(a)};function lt(n,e){const{containerEl:i,instance:t}=n[ae],{disabled:a}=kt(n,t);a||i.clientHeight===0||(i.scrollHeight<=i.clientHeight?e.call(t):yi(n))}const Qn={async mounted(n,e){const{instance:i,value:t}=e;Qi(t)||hn(ae,"'v-infinite-scroll' binding value must be a function"),await et();const{delay:a,immediate:s}=kt(n,i),o=wi(n,!0),r=o===window?document.documentElement:o,c=Pe(Jn.bind(null,n,t),a);if(o){if(n[ae]={instance:i,container:o,containerEl:r,delay:a,cb:t,onScroll:c,lastScrollTop:r.scrollTop},s){const u=new MutationObserver(Pe(lt.bind(null,n,t),jn));n[ae].observer=u,u.observe(n,{childList:!0,subtree:!0}),lt(n,t)}o.addEventListener("scroll",c)}},unmounted(n){const{container:e,onScroll:i}=n[ae];e==null||e.removeEventListener("scroll",i),yi(n)},async updated(n){if(!n[ae])await et();else{const{containerEl:e,cb:i,observer:t}=n[ae];e.clientHeight&&t&&lt(n,i)}}},mt=Qn;mt.install=n=>{n.directive("InfiniteScroll",mt)};const ea=mt;function Ei(){const n=N(!1);return{fetchData:async(i,t,a=()=>{},s=()=>{})=>{n.value=!0;const o=await i(t);n.value=!1;const{data:r,success:c,msg:u}=o;return c?(a(r),r):(mi.error(u),s(),!1)},loading:n}}const ta={class:"favorite-wrap"},ia={class:"edit-container"},na={class:"edit-form-item"},aa=T("p",{class:"label"},"标题",-1),sa={class:"edit-form-item"},oa=T("p",{class:"label"},"描述",-1),ra={class:"dialog-footer"},la={__name:"FavoriteWrap",setup(n){const e=we(),{loading:i,fetchData:t}=Ei(),a=N(!1),s=O(()=>e.selectEdit),o=O(()=>e.editShow),r=N({title:"",desc_txt:""}),c=l=>{l()},u=async()=>{await t(st,{id:s.value.id,...r.value})&&(e.UPDATE_FAVORITE_BY_ID({id:s.value.id,...r.value}),a.value=!1,Me({title:"操作成功",message:"已更新",type:"success"}))};return ce(()=>{a.value=o.value}),le(()=>o.value,l=>{l&&(r.value={title:s.value.title,desc_txt:s.value.desc_txt}),a.value=l}),le(()=>a.value,l=>{l||e.UPDATE_SELECT_EDIT(null),e.UPDATE_EDIT_SHOW(l)}),(l,d)=>{const f=vn,h=pn,p=mn;return _(),S("div",ta,[De(l.$slots,"default"),y(p,{modelValue:a.value,"onUpdate:modelValue":d[2]||(d[2]=g=>a.value=g),title:"编辑收藏","before-close":c,"append-to-body":"",class:"edit-dialog",draggable:"","destroy-on-close":""},{footer:R(()=>[T("span",ra,[y(h,{onClick:u,loading:v(i)},{default:R(()=>[en("更新")]),_:1},8,["loading"])])]),default:R(()=>[T("div",ia,[T("div",na,[aa,y(f,{placeholder:"输入标题",modelValue:r.value.title,"onUpdate:modelValue":d[0]||(d[0]=g=>r.value.title=g)},null,8,["modelValue"])]),T("div",sa,[oa,y(f,{placeholder:"输入描述",modelValue:r.value.desc_txt,"onUpdate:modelValue":d[1]||(d[1]=g=>r.value.desc_txt=g)},null,8,["modelValue"])])])]),_:1},8,["modelValue"])])}}};/*!
 * Viewer.js v1.11.3
 * https://fengyuanchen.github.io/viewerjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-03-05T07:01:17.741Z
 */function Ot(n,e){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,t)}return i}function Ct(n){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Ot(Object(i),!0).forEach(function(t){da(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Ot(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function pt(n){"@babel/helpers - typeof";return pt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(n)}function ca(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Nt(n,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,Ti(t.key),t)}}function ua(n,e,i){return e&&Nt(n.prototype,e),i&&Nt(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function da(n,e,i){return e=Ti(e),e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}function fa(n,e){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var t=i.call(n,e||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ti(n){var e=fa(n,"string");return typeof e=="symbol"?e:String(e)}var Vt={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialCoverage:.9,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},ha='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>',ot=typeof window<"u"&&typeof window.document<"u",me=ot?window:{},Le=ot&&me.document.documentElement?"ontouchstart"in me.document.documentElement:!1,It=ot?"PointerEvent"in me:!1,D="viewer",Ge="move",ki="switch",Re="zoom",Xe="".concat(D,"-active"),va="".concat(D,"-close"),Ze="".concat(D,"-fade"),gt="".concat(D,"-fixed"),ma="".concat(D,"-fullscreen"),$t="".concat(D,"-fullscreen-exit"),pe="".concat(D,"-hide"),pa="".concat(D,"-hide-md-down"),ga="".concat(D,"-hide-sm-down"),_a="".concat(D,"-hide-xs-down"),Q="".concat(D,"-in"),Fe="".concat(D,"-invisible"),Ae="".concat(D,"-loading"),wa="".concat(D,"-move"),Rt="".concat(D,"-open"),Ee="".concat(D,"-show"),Y="".concat(D,"-transition"),ze="click",_t="dblclick",Pt="dragstart",Ft="focusin",Mt="keydown",te="load",_e="error",ba=Le?"touchend touchcancel":"mouseup",ya=Le?"touchmove":"mousemove",Ea=Le?"touchstart":"mousedown",Ut=It?"pointerdown":Ea,Ht=It?"pointermove":ya,Bt=It?"pointerup pointercancel":ba,Wt="resize",ne="transitionend",Yt="wheel",Xt="ready",qt="show",jt="shown",Kt="hide",Gt="hidden",Zt="view",Ue="viewed",Jt="move",Qt="moved",ei="rotate",ti="rotated",ii="scale",ni="scaled",ai="zoom",si="zoomed",oi="play",ri="stop",nt="".concat(D,"Action"),St=/\s\s*/,qe=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function He(n){return typeof n=="string"}var Ta=Number.isNaN||me.isNaN;function W(n){return typeof n=="number"&&!Ta(n)}function Ie(n){return typeof n>"u"}function Oe(n){return pt(n)==="object"&&n!==null}var ka=Object.prototype.hasOwnProperty;function Se(n){if(!Oe(n))return!1;try{var e=n.constructor,i=e.prototype;return e&&i&&ka.call(i,"isPrototypeOf")}catch{return!1}}function V(n){return typeof n=="function"}function P(n,e){if(n&&V(e))if(Array.isArray(n)||W(n.length)){var i=n.length,t;for(t=0;t<i&&e.call(n,n[t],t,n)!==!1;t+=1);}else Oe(n)&&Object.keys(n).forEach(function(a){e.call(n,n[a],a,n)});return n}var Z=Object.assign||function(e){for(var i=arguments.length,t=new Array(i>1?i-1:0),a=1;a<i;a++)t[a-1]=arguments[a];return Oe(e)&&t.length>0&&t.forEach(function(s){Oe(s)&&Object.keys(s).forEach(function(o){e[o]=s[o]})}),e},Ca=/^(?:width|height|left|top|marginLeft|marginTop)$/;function oe(n,e){var i=n.style;P(e,function(t,a){Ca.test(a)&&W(t)&&(t+="px"),i[a]=t})}function Ia(n){return He(n)?n.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):n}function ke(n,e){return!n||!e?!1:n.classList?n.classList.contains(e):n.className.indexOf(e)>-1}function k(n,e){if(!(!n||!e)){if(W(n.length)){P(n,function(t){k(t,e)});return}if(n.classList){n.classList.add(e);return}var i=n.className.trim();i?i.indexOf(e)<0&&(n.className="".concat(i," ").concat(e)):n.className=e}}function A(n,e){if(!(!n||!e)){if(W(n.length)){P(n,function(i){A(i,e)});return}if(n.classList){n.classList.remove(e);return}n.className.indexOf(e)>=0&&(n.className=n.className.replace(e,""))}}function Be(n,e,i){if(e){if(W(n.length)){P(n,function(t){Be(t,e,i)});return}i?k(n,e):A(n,e)}}var Sa=/([a-z\d])([A-Z])/g;function xt(n){return n.replace(Sa,"$1-$2").toLowerCase()}function xe(n,e){return Oe(n[e])?n[e]:n.dataset?n.dataset[e]:n.getAttribute("data-".concat(xt(e)))}function wt(n,e,i){Oe(i)?n[e]=i:n.dataset?n.dataset[e]=i:n.setAttribute("data-".concat(xt(e)),i)}var Ci=function(){var n=!1;if(ot){var e=!1,i=function(){},t=Object.defineProperty({},"once",{get:function(){return n=!0,e},set:function(s){e=s}});me.addEventListener("test",i,t),me.removeEventListener("test",i,t)}return n}();function $(n,e,i){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=i;e.trim().split(St).forEach(function(s){if(!Ci){var o=n.listeners;o&&o[s]&&o[s][i]&&(a=o[s][i],delete o[s][i],Object.keys(o[s]).length===0&&delete o[s],Object.keys(o).length===0&&delete n.listeners)}n.removeEventListener(s,a,t)})}function I(n,e,i){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=i;e.trim().split(St).forEach(function(s){if(t.once&&!Ci){var o=n.listeners,r=o===void 0?{}:o;a=function(){delete r[s][i],n.removeEventListener(s,a,t);for(var u=arguments.length,l=new Array(u),d=0;d<u;d++)l[d]=arguments[d];i.apply(n,l)},r[s]||(r[s]={}),r[s][i]&&n.removeEventListener(s,r[s][i],t),r[s][i]=a,n.listeners=r}n.addEventListener(s,a,t)})}function X(n,e,i,t){var a;return V(Event)&&V(CustomEvent)?a=new CustomEvent(e,Ct({bubbles:!0,cancelable:!0,detail:i},t)):(a=document.createEvent("CustomEvent"),a.initCustomEvent(e,!0,!0,i)),n.dispatchEvent(a)}function xa(n){var e=n.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}function Je(n){var e=n.rotate,i=n.scaleX,t=n.scaleY,a=n.translateX,s=n.translateY,o=[];W(a)&&a!==0&&o.push("translateX(".concat(a,"px)")),W(s)&&s!==0&&o.push("translateY(".concat(s,"px)")),W(e)&&e!==0&&o.push("rotate(".concat(e,"deg)")),W(i)&&i!==1&&o.push("scaleX(".concat(i,")")),W(t)&&t!==1&&o.push("scaleY(".concat(t,")"));var r=o.length?o.join(" "):"none";return{WebkitTransform:r,msTransform:r,transform:r}}function Da(n){return He(n)?decodeURIComponent(n.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""}var ct=me.navigator&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(me.navigator.userAgent);function Ii(n,e,i){var t=document.createElement("img");if(n.naturalWidth&&!ct)return i(n.naturalWidth,n.naturalHeight),t;var a=document.body||document.documentElement;return t.onload=function(){i(t.width,t.height),ct||a.removeChild(t)},P(e.inheritedAttributes,function(s){var o=n.getAttribute(s);o!==null&&t.setAttribute(s,o)}),t.src=n.src,ct||(t.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(t)),t}function je(n){switch(n){case 2:return _a;case 3:return ga;case 4:return pa;default:return""}}function La(n){var e=Ct({},n),i=[];return P(n,function(t,a){delete e[a],P(e,function(s){var o=Math.abs(t.startX-s.startX),r=Math.abs(t.startY-s.startY),c=Math.abs(t.endX-s.endX),u=Math.abs(t.endY-s.endY),l=Math.sqrt(o*o+r*r),d=Math.sqrt(c*c+u*u),f=(d-l)/l;i.push(f)})}),i.sort(function(t,a){return Math.abs(t)<Math.abs(a)}),i[0]}function Ke(n,e){var i=n.pageX,t=n.pageY,a={endX:i,endY:t};return e?a:Ct({timeStamp:Date.now(),startX:i,startY:t},a)}function Aa(n){var e=0,i=0,t=0;return P(n,function(a){var s=a.startX,o=a.startY;e+=s,i+=o,t+=1}),e/=t,i/=t,{pageX:e,pageY:i}}var za={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initBody:function(){var e=this.element.ownerDocument,i=e.body||e.documentElement;this.body=i,this.scrollbarWidth=window.innerWidth-e.documentElement.clientWidth,this.initialBodyPaddingRight=i.style.paddingRight,this.initialBodyComputedPaddingRight=window.getComputedStyle(i).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var e=this.options,i=this.parent,t;e.inline&&(t={width:Math.max(i.offsetWidth,e.minWidth),height:Math.max(i.offsetHeight,e.minHeight)},this.parentData=t),(this.fulled||!t)&&(t=this.containerData),this.viewerData=Z({},t)},renderViewer:function(){this.options.inline&&!this.fulled&&oe(this.viewer,this.viewerData)},initList:function(){var e=this,i=this.element,t=this.options,a=this.list,s=[];a.innerHTML="",P(this.images,function(o,r){var c=o.src,u=o.alt||Da(c),l=e.getImageURL(o);if(c||l){var d=document.createElement("li"),f=document.createElement("img");P(t.inheritedAttributes,function(h){var p=o.getAttribute(h);p!==null&&f.setAttribute(h,p)}),t.navbar&&(f.src=c||l),f.alt=u,f.setAttribute("data-original-url",l||c),d.setAttribute("data-index",r),d.setAttribute("data-viewer-action","view"),d.setAttribute("role","button"),t.keyboard&&d.setAttribute("tabindex",0),d.appendChild(f),a.appendChild(d),s.push(d)}}),this.items=s,P(s,function(o){var r=o.firstElementChild,c,u;wt(r,"filled",!0),t.loading&&k(o,Ae),I(r,te,c=function(d){$(r,_e,u),t.loading&&A(o,Ae),e.loadImage(d)},{once:!0}),I(r,_e,u=function(){$(r,te,c),t.loading&&A(o,Ae)},{once:!0})}),t.transition&&I(i,Ue,function(){k(a,Y)},{once:!0})},renderList:function(){var e=this.index,i=this.items[e];if(i){var t=i.nextElementSibling,a=parseInt(window.getComputedStyle(t||i).marginLeft,10),s=i.offsetWidth,o=s+a;oe(this.list,Z({width:o*this.length-a},Je({translateX:(this.viewerData.width-s)/2-o*e})))}},resetList:function(){var e=this.list;e.innerHTML="",A(e,Y),oe(e,Je({translateX:0}))},initImage:function(e){var i=this,t=this.options,a=this.image,s=this.viewerData,o=this.footer.offsetHeight,r=s.width,c=Math.max(s.height-o,o),u=this.imageData||{},l;this.imageInitializing={abort:function(){l.onload=null}},l=Ii(a,t,function(d,f){var h=d/f,p=Math.max(0,Math.min(1,t.initialCoverage)),g=r,C=c;i.imageInitializing=!1,c*h>r?C=r/h:g=c*h,p=W(p)?p:.9,g=Math.min(g*p,d),C=Math.min(C*p,f);var b=(r-g)/2,w=(c-C)/2,E={left:b,top:w,x:b,y:w,width:g,height:C,oldRatio:1,ratio:g/d,aspectRatio:h,naturalWidth:d,naturalHeight:f},H=Z({},E);t.rotatable&&(E.rotate=u.rotate||0,H.rotate=0),t.scalable&&(E.scaleX=u.scaleX||1,E.scaleY=u.scaleY||1,H.scaleX=1,H.scaleY=1),i.imageData=E,i.initialImageData=H,e&&e()})},renderImage:function(e){var i=this,t=this.image,a=this.imageData;if(oe(t,Z({width:a.width,height:a.height,marginLeft:a.x,marginTop:a.y},Je(a))),e)if((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&ke(t,Y)){var s=function(){i.imageRendering=!1,e()};this.imageRendering={abort:function(){$(t,ne,s)}},I(t,ne,s,{once:!0})}else e()},resetImage:function(){if(this.viewing||this.viewed){var e=this.image;this.viewing&&this.viewing.abort(),e.parentNode.removeChild(e),this.image=null}}},Oa={bind:function(){var e=this.options,i=this.viewer,t=this.canvas,a=this.element.ownerDocument;I(i,ze,this.onClick=this.click.bind(this)),I(i,Pt,this.onDragStart=this.dragstart.bind(this)),I(t,Ut,this.onPointerDown=this.pointerdown.bind(this)),I(a,Ht,this.onPointerMove=this.pointermove.bind(this)),I(a,Bt,this.onPointerUp=this.pointerup.bind(this)),I(a,Mt,this.onKeyDown=this.keydown.bind(this)),I(window,Wt,this.onResize=this.resize.bind(this)),e.zoomable&&e.zoomOnWheel&&I(i,Yt,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleOnDblclick&&I(t,_t,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var e=this.options,i=this.viewer,t=this.canvas,a=this.element.ownerDocument;$(i,ze,this.onClick),$(i,Pt,this.onDragStart),$(t,Ut,this.onPointerDown),$(a,Ht,this.onPointerMove),$(a,Bt,this.onPointerUp),$(a,Mt,this.onKeyDown),$(window,Wt,this.onResize),e.zoomable&&e.zoomOnWheel&&$(i,Yt,this.onWheel,{passive:!1,capture:!0}),e.toggleOnDblclick&&$(t,_t,this.onDblclick)}},Na={click:function(e){var i=this.options,t=this.imageData,a=e.target,s=xe(a,nt);switch(!s&&a.localName==="img"&&a.parentElement.localName==="li"&&(a=a.parentElement,s=xe(a,nt)),Le&&e.isTrusted&&a===this.canvas&&clearTimeout(this.clickCanvasTimeout),s){case"mix":this.played?this.stop():i.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.pointerMoved||this.hide();break;case"view":this.view(xe(a,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(i.loop);break;case"play":this.play(i.fullscreen);break;case"next":this.next(i.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-t.scaleX||-1);break;case"flip-vertical":this.scaleY(-t.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(e){e.preventDefault(),this.viewed&&e.target===this.image&&(Le&&e.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(e.isTrusted?e:e.detail&&e.detail.originalEvent))},load:function(){var e=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var i=this.element,t=this.options,a=this.image,s=this.index,o=this.viewerData;A(a,Fe),t.loading&&A(this.canvas,Ae),a.style.cssText="height:0;"+"margin-left:".concat(o.width/2,"px;")+"margin-top:".concat(o.height/2,"px;")+"max-width:none!important;position:relative;width:0;",this.initImage(function(){Be(a,wa,t.movable),Be(a,Y,t.transition),e.renderImage(function(){e.viewed=!0,e.viewing=!1,V(t.viewed)&&I(i,Ue,t.viewed,{once:!0}),X(i,Ue,{originalImage:e.images[s],index:s,image:a},{cancelable:!1})})})},loadImage:function(e){var i=e.target,t=i.parentNode,a=t.offsetWidth||30,s=t.offsetHeight||50,o=!!xe(i,"filled");Ii(i,this.options,function(r,c){var u=r/c,l=a,d=s;s*u>a?o?l=s*u:d=a/u:o?d=a/u:l=s*u,oe(i,Z({width:l,height:d},Je({translateX:(a-l)/2,translateY:(s-d)/2})))})},keydown:function(e){var i=this.options;if(i.keyboard){var t=e.keyCode||e.which||e.charCode;switch(t){case 13:this.viewer.contains(e.target)&&this.click(e);break}if(this.fulled)switch(t){case 27:this.played?this.stop():i.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.played&&this.playing?this.playing.prev():this.prev(i.loop);break;case 38:e.preventDefault(),this.zoom(i.zoomRatio,!0);break;case 39:this.played&&this.playing?this.playing.next():this.next(i.loop);break;case 40:e.preventDefault(),this.zoom(-i.zoomRatio,!0);break;case 48:case 49:e.ctrlKey&&(e.preventDefault(),this.toggle());break}}},dragstart:function(e){e.target.localName==="img"&&e.preventDefault()},pointerdown:function(e){var i=this.options,t=this.pointers,a=e.buttons,s=e.button;if(this.pointerMoved=!1,!(!this.viewed||this.showing||this.viewing||this.hiding||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(W(a)&&a!==1||W(s)&&s!==0||e.ctrlKey))){e.preventDefault(),e.changedTouches?P(e.changedTouches,function(r){t[r.identifier]=Ke(r)}):t[e.pointerId||0]=Ke(e);var o=i.movable?Ge:!1;i.zoomOnTouch&&i.zoomable&&Object.keys(t).length>1?o=Re:i.slideOnTouch&&(e.pointerType==="touch"||e.type==="touchstart")&&this.isSwitchable()&&(o=ki),i.transition&&(o===Ge||o===Re)&&A(this.image,Y),this.action=o}},pointermove:function(e){var i=this.pointers,t=this.action;!this.viewed||!t||(e.preventDefault(),e.changedTouches?P(e.changedTouches,function(a){Z(i[a.identifier]||{},Ke(a,!0))}):Z(i[e.pointerId||0]||{},Ke(e,!0)),this.change(e))},pointerup:function(e){var i=this,t=this.options,a=this.action,s=this.pointers,o;e.changedTouches?P(e.changedTouches,function(r){o=s[r.identifier],delete s[r.identifier]}):(o=s[e.pointerId||0],delete s[e.pointerId||0]),a&&(e.preventDefault(),t.transition&&(a===Ge||a===Re)&&k(this.image,Y),this.action=!1,Le&&a!==Re&&o&&Date.now()-o.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),t.toggleOnDblclick&&this.viewed&&e.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){X(i.image,_t,{originalEvent:e})},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){i.imageClicked=!1},500)):(this.imageClicked=!1,t.backdrop&&t.backdrop!=="static"&&e.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){X(i.canvas,ze,{originalEvent:e})},50)))))},resize:function(){var e=this;if(!(!this.isShown||this.hiding)&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage()}),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)){this.stop();return}P(this.player.getElementsByTagName("img"),function(i){I(i,te,e.loadImage.bind(e),{once:!0}),X(i,te)})}},wheel:function(e){var i=this;if(this.viewed&&(e.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50);var t=Number(this.options.zoomRatio)||.1,a=1;e.deltaY?a=e.deltaY>0?1:-1:e.wheelDelta?a=-e.wheelDelta/120:e.detail&&(a=e.detail>0?1:-1),this.zoom(-a*t,!0,null,e)}}},Va={show:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.element,t=this.options;if(t.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(e),this;if(V(t.show)&&I(i,qt,t.show,{once:!0}),X(i,qt)===!1||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var a=this.viewer;if(A(a,pe),a.setAttribute("role","dialog"),a.setAttribute("aria-labelledby",this.title.id),a.setAttribute("aria-modal",!0),a.removeAttribute("aria-hidden"),t.transition&&!e){var s=this.shown.bind(this);this.transitioning={abort:function(){$(a,ne,s),A(a,Q)}},k(a,Y),a.initialOffsetWidth=a.offsetWidth,I(a,ne,s,{once:!0}),k(a,Q)}else k(a,Q),this.shown();return this},hide:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.element,a=this.options;if(a.inline||this.hiding||!(this.isShown||this.showing))return this;if(V(a.hide)&&I(t,Kt,a.hide,{once:!0}),X(t,Kt)===!1)return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var s=this.viewer,o=this.image,r=function(){A(s,Q),e.hidden()};if(a.transition&&!i){var c=function l(d){d&&d.target===s&&($(s,ne,l),e.hidden())},u=function(){ke(s,Y)?(I(s,ne,c),A(s,Q)):r()};this.transitioning={abort:function(){e.viewed&&ke(o,Y)?$(o,ne,u):ke(s,Y)&&$(s,ne,c)}},this.viewed&&ke(o,Y)?(I(o,ne,u,{once:!0}),this.zoomTo(0,!1,null,null,!0)):u()}else r();return this},view:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.initialViewIndex;if(i=Number(i)||0,this.hiding||this.played||i<0||i>=this.length||this.viewed&&i===this.index)return this;if(!this.isShown)return this.index=i,this.show();this.viewing&&this.viewing.abort();var t=this.element,a=this.options,s=this.title,o=this.canvas,r=this.items[i],c=r.querySelector("img"),u=xe(c,"originalUrl"),l=c.getAttribute("alt"),d=document.createElement("img");if(P(a.inheritedAttributes,function(C){var b=c.getAttribute(C);b!==null&&d.setAttribute(C,b)}),d.src=u,d.alt=l,V(a.view)&&I(t,Zt,a.view,{once:!0}),X(t,Zt,{originalImage:this.images[i],index:i,image:d})===!1||!this.isShown||this.hiding||this.played)return this;var f=this.items[this.index];f&&(A(f,Xe),f.removeAttribute("aria-selected")),k(r,Xe),r.setAttribute("aria-selected",!0),a.focus&&r.focus(),this.image=d,this.viewed=!1,this.index=i,this.imageData={},k(d,Fe),a.loading&&k(o,Ae),o.innerHTML="",o.appendChild(d),this.renderList(),s.innerHTML="";var h=function(){var b=e.imageData,w=Array.isArray(a.title)?a.title[1]:a.title;s.innerHTML=Ia(V(w)?w.call(e,d,b):"".concat(l," (").concat(b.naturalWidth," × ").concat(b.naturalHeight,")"))},p,g;return I(t,Ue,h,{once:!0}),this.viewing={abort:function(){$(t,Ue,h),d.complete?e.imageRendering?e.imageRendering.abort():e.imageInitializing&&e.imageInitializing.abort():(d.src="",$(d,te,p),e.timeout&&clearTimeout(e.timeout))}},d.complete?this.load():(I(d,te,p=function(){$(d,_e,g),e.load()},{once:!0}),I(d,_e,g=function(){$(d,te,p),e.timeout&&(clearTimeout(e.timeout),e.timeout=!1),A(d,Fe),a.loading&&A(e.canvas,Ae)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){A(d,Fe),e.timeout=!1},1e3)),this},prev:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.index-1;return i<0&&(i=e?this.length-1:0),this.view(i),this},next:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.length-1,t=this.index+1;return t>i&&(t=e?0:i),this.view(t),this},move:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,t=this.imageData;return this.moveTo(Ie(e)?e:t.x+Number(e),Ie(i)?i:t.y+Number(i)),this},moveTo:function(e){var i=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=this.element,o=this.options,r=this.imageData;if(e=Number(e),t=Number(t),this.viewed&&!this.played&&o.movable){var c=r.x,u=r.y,l=!1;if(W(e)?l=!0:e=c,W(t)?l=!0:t=u,l){if(V(o.move)&&I(s,Jt,o.move,{once:!0}),X(s,Jt,{x:e,y:t,oldX:c,oldY:u,originalEvent:a})===!1)return this;r.x=e,r.y=t,r.left=e,r.top=t,this.moving=!0,this.renderImage(function(){i.moving=!1,V(o.moved)&&I(s,Qt,o.moved,{once:!0}),X(s,Qt,{x:e,y:t,oldX:c,oldY:u,originalEvent:a},{cancelable:!1})})}}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e)),this},rotateTo:function(e){var i=this,t=this.element,a=this.options,s=this.imageData;if(e=Number(e),W(e)&&this.viewed&&!this.played&&a.rotatable){var o=s.rotate;if(V(a.rotate)&&I(t,ei,a.rotate,{once:!0}),X(t,ei,{degree:e,oldDegree:o})===!1)return this;s.rotate=e,this.rotating=!0,this.renderImage(function(){i.rotating=!1,V(a.rotated)&&I(t,ti,a.rotated,{once:!0}),X(t,ti,{degree:e,oldDegree:o},{cancelable:!1})})}return this},scaleX:function(e){return this.scale(e,this.imageData.scaleY),this},scaleY:function(e){return this.scale(this.imageData.scaleX,e),this},scale:function(e){var i=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,a=this.element,s=this.options,o=this.imageData;if(e=Number(e),t=Number(t),this.viewed&&!this.played&&s.scalable){var r=o.scaleX,c=o.scaleY,u=!1;if(W(e)?u=!0:e=r,W(t)?u=!0:t=c,u){if(V(s.scale)&&I(a,ii,s.scale,{once:!0}),X(a,ii,{scaleX:e,scaleY:t,oldScaleX:r,oldScaleY:c})===!1)return this;o.scaleX=e,o.scaleY=t,this.scaling=!0,this.renderImage(function(){i.scaling=!1,V(s.scaled)&&I(a,ni,s.scaled,{once:!0}),X(a,ni,{scaleX:e,scaleY:t,oldScaleX:r,oldScaleY:c},{cancelable:!1})})}}return this},zoom:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=this.imageData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(s.width*e/s.naturalWidth,i,t,a),this},zoomTo:function(e){var i=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,r=this.element,c=this.options,u=this.pointers,l=this.imageData,d=l.x,f=l.y,h=l.width,p=l.height,g=l.naturalWidth,C=l.naturalHeight;if(e=Math.max(0,e),W(e)&&this.viewed&&!this.played&&(o||c.zoomable)){if(!o){var b=Math.max(.01,c.minZoomRatio),w=Math.min(100,c.maxZoomRatio);e=Math.min(Math.max(e,b),w)}if(s)switch(s.type){case"wheel":c.zoomRatio>=.055&&e>.95&&e<1.05&&(e=1);break;case"pointermove":case"touchmove":case"mousemove":e>.99&&e<1.01&&(e=1);break}var E=g*e,H=C*e,B=E-h,x=H-p,z=l.ratio;if(V(c.zoom)&&I(r,ai,c.zoom,{once:!0}),X(r,ai,{ratio:e,oldRatio:z,originalEvent:s})===!1)return this;if(this.zooming=!0,s){var q=xa(this.viewer),j=u&&Object.keys(u).length>0?Aa(u):{pageX:s.pageX,pageY:s.pageY};l.x-=B*((j.pageX-q.left-d)/h),l.y-=x*((j.pageY-q.top-f)/p)}else Se(a)&&W(a.x)&&W(a.y)?(l.x-=B*((a.x-d)/h),l.y-=x*((a.y-f)/p)):(l.x-=B/2,l.y-=x/2);l.left=l.x,l.top=l.y,l.width=E,l.height=H,l.oldRatio=z,l.ratio=e,this.renderImage(function(){i.zooming=!1,V(c.zoomed)&&I(r,si,c.zoomed,{once:!0}),X(r,si,{ratio:e,oldRatio:z,originalEvent:s},{cancelable:!1})}),t&&this.tooltip()}return this},play:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.isShown||this.played)return this;var t=this.element,a=this.options;if(V(a.play)&&I(t,oi,a.play,{once:!0}),X(t,oi)===!1)return this;var s=this.player,o=this.loadImage.bind(this),r=[],c=0,u=0;if(this.played=!0,this.onLoadWhenPlay=o,i&&this.requestFullscreen(i),k(s,Ee),P(this.items,function(f,h){var p=f.querySelector("img"),g=document.createElement("img");g.src=xe(p,"originalUrl"),g.alt=p.getAttribute("alt"),g.referrerPolicy=p.referrerPolicy,c+=1,k(g,Ze),Be(g,Y,a.transition),ke(f,Xe)&&(k(g,Q),u=h),r.push(g),I(g,te,o,{once:!0}),s.appendChild(g)}),W(a.interval)&&a.interval>0){var l=function f(){clearTimeout(e.playing.timeout),A(r[u],Q),u-=1,u=u>=0?u:c-1,k(r[u],Q),e.playing.timeout=setTimeout(f,a.interval)},d=function f(){clearTimeout(e.playing.timeout),A(r[u],Q),u+=1,u=u<c?u:0,k(r[u],Q),e.playing.timeout=setTimeout(f,a.interval)};c>1&&(this.playing={prev:l,next:d,timeout:setTimeout(d,a.interval)})}return this},stop:function(){var e=this;if(!this.played)return this;var i=this.element,t=this.options;if(V(t.stop)&&I(i,ri,t.stop,{once:!0}),X(i,ri)===!1)return this;var a=this.player;return clearTimeout(this.playing.timeout),this.playing=!1,this.played=!1,P(a.getElementsByTagName("img"),function(s){$(s,te,e.onLoadWhenPlay)}),A(a,Ee),a.innerHTML="",this.exitFullscreen(),this},full:function(){var e=this,i=this.options,t=this.viewer,a=this.image,s=this.list;return!this.isShown||this.played||this.fulled||!i.inline?this:(this.fulled=!0,this.open(),k(this.button,$t),i.transition&&(A(s,Y),this.viewed&&A(a,Y)),k(t,gt),t.setAttribute("role","dialog"),t.setAttribute("aria-labelledby",this.title.id),t.setAttribute("aria-modal",!0),t.removeAttribute("style"),oe(t,{zIndex:i.zIndex}),i.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=Z({},this.containerData),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){i.transition&&setTimeout(function(){k(a,Y),k(s,Y)},0)})}),this)},exit:function(){var e=this,i=this.options,t=this.viewer,a=this.image,s=this.list;return!this.isShown||this.played||!this.fulled||!i.inline?this:(this.fulled=!1,this.close(),A(this.button,$t),i.transition&&(A(s,Y),this.viewed&&A(a,Y)),i.focus&&this.clearEnforceFocus(),t.removeAttribute("role"),t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-modal"),A(t,gt),oe(t,{zIndex:i.zIndexInline}),this.viewerData=Z({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){i.transition&&setTimeout(function(){k(a,Y),k(s,Y)},0)})}),this)},tooltip:function(){var e=this,i=this.options,t=this.tooltipBox,a=this.imageData;return!this.viewed||this.played||!i.tooltip?this:(t.textContent="".concat(Math.round(a.ratio*100),"%"),this.tooltipping?clearTimeout(this.tooltipping):i.transition?(this.fading&&X(t,ne),k(t,Ee),k(t,Ze),k(t,Y),t.removeAttribute("aria-hidden"),t.initialOffsetWidth=t.offsetWidth,k(t,Q)):(k(t,Ee),t.removeAttribute("aria-hidden")),this.tooltipping=setTimeout(function(){i.transition?(I(t,ne,function(){A(t,Ee),A(t,Ze),A(t,Y),t.setAttribute("aria-hidden",!0),e.fading=!1},{once:!0}),A(t,Q),e.fading=!0):(A(t,Ee),t.setAttribute("aria-hidden",!0)),e.tooltipping=!1},1e3),this)},toggle:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.imageData.ratio===1?this.zoomTo(this.imageData.oldRatio,!0,null,e):this.zoomTo(1,!0,null,e),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=Z({},this.initialImageData),this.renderImage()),this},update:function(){var e=this,i=this.element,t=this.options,a=this.isImg;if(a&&!i.parentNode)return this.destroy();var s=[];if(P(a?[i]:i.querySelectorAll("img"),function(u){V(t.filter)?t.filter.call(e,u)&&s.push(u):e.getImageURL(u)&&s.push(u)}),!s.length)return this;if(this.images=s,this.length=s.length,this.ready){var o=[];if(P(this.items,function(u,l){var d=u.querySelector("img"),f=s[l];f&&d?(f.src!==d.src||f.alt!==d.alt)&&o.push(l):o.push(l)}),oe(this.list,{width:"auto"}),this.initList(),this.isShown)if(this.length){if(this.viewed){var r=o.indexOf(this.index);if(r>=0)this.viewed=!1,this.view(Math.max(Math.min(this.index-r,this.length-1),0));else{var c=this.items[this.index];k(c,Xe),c.setAttribute("aria-selected",!0)}}}else this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""}else this.build();return this},destroy:function(){var e=this.element,i=this.options;return e[D]?(this.destroyed=!0,this.ready?(this.played&&this.stop(),i.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):i.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),i.inline||$(e,ze,this.onStart),e[D]=void 0,this):this}},$a={getImageURL:function(e){var i=this.options.url;return He(i)?i=e.getAttribute(i):V(i)?i=i.call(this,e):i="",i},enforceFocus:function(){var e=this;this.clearEnforceFocus(),I(document,Ft,this.onFocusin=function(i){var t=e.viewer,a=i.target;if(!(a===document||a===t||t.contains(a))){for(;a;){if(a.getAttribute("tabindex")!==null||a.getAttribute("aria-modal")==="true")return;a=a.parentElement}t.focus()}})},clearEnforceFocus:function(){this.onFocusin&&($(document,Ft,this.onFocusin),this.onFocusin=null)},open:function(){var e=this.body;k(e,Rt),this.scrollbarWidth>0&&(e.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px"))},close:function(){var e=this.body;A(e,Rt),this.scrollbarWidth>0&&(e.style.paddingRight=this.initialBodyPaddingRight)},shown:function(){var e=this.element,i=this.options,t=this.viewer;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,i.focus&&(t.focus(),this.enforceFocus()),V(i.shown)&&I(e,jt,i.shown,{once:!0}),X(e,jt)!==!1&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var e=this.element,i=this.options,t=this.viewer;i.fucus&&this.clearEnforceFocus(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.close(),this.unbind(),k(t,pe),t.removeAttribute("role"),t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-modal"),t.setAttribute("aria-hidden",!0),this.resetList(),this.resetImage(),this.hiding=!1,this.destroyed||(V(i.hidden)&&I(e,Gt,i.hidden,{once:!0}),X(e,Gt,null,{cancelable:!1}))},requestFullscreen:function(e){var i=this.element.ownerDocument;if(this.fulled&&!(i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement)){var t=i.documentElement;t.requestFullscreen?Se(e)?t.requestFullscreen(e):t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}},exitFullscreen:function(){var e=this.element.ownerDocument;this.fulled&&(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())},change:function(e){var i=this.options,t=this.pointers,a=t[Object.keys(t)[0]];if(a){var s=a.endX-a.startX,o=a.endY-a.startY;switch(this.action){case Ge:(s!==0||o!==0)&&(this.pointerMoved=!0,this.move(s,o,e));break;case Re:this.zoom(La(t),!1,null,e);break;case ki:{this.action="switched";var r=Math.abs(s);r>1&&r>Math.abs(o)&&(this.pointers={},s>1?this.prev(i.loop):s<-1&&this.next(i.loop));break}}P(t,function(c){c.startX=c.endX,c.startY=c.endY})}},isSwitchable:function(){var e=this.imageData,i=this.viewerData;return this.length>1&&e.x>=0&&e.y>=0&&e.width<=i.width&&e.height<=i.height}},Ra=me.Viewer,Pa=function(n){return function(){return n+=1,n}}(-1),Si=function(){function n(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ca(this,n),!e||e.nodeType!==1)throw new Error("The first argument is required and must be an element.");this.element=e,this.options=Z({},Vt,Se(i)&&i),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.moving=!1,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.rotating=!1,this.scaling=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.pointerMoved=!1,this.id=Pa(),this.init()}return ua(n,[{key:"init",value:function(){var i=this,t=this.element,a=this.options;if(!t[D]){t[D]=this,a.focus&&!a.keyboard&&(a.focus=!1);var s=t.localName==="img",o=[];if(P(s?[t]:t.querySelectorAll("img"),function(u){V(a.filter)?a.filter.call(i,u)&&o.push(u):i.getImageURL(u)&&o.push(u)}),this.isImg=s,this.length=o.length,this.images=o,this.initBody(),Ie(document.createElement(D).style.transition)&&(a.transition=!1),a.inline){var r=0,c=function(){if(r+=1,r===i.length){var l;i.initializing=!1,i.delaying={abort:function(){clearTimeout(l)}},l=setTimeout(function(){i.delaying=!1,i.build()},0)}};this.initializing={abort:function(){P(o,function(l){l.complete||($(l,te,c),$(l,_e,c))})}},P(o,function(u){if(u.complete)c();else{var l,d;I(u,te,l=function(){$(u,_e,d),c()},{once:!0}),I(u,_e,d=function(){$(u,te,l),c()},{once:!0})}})}else I(t,ze,this.onStart=function(u){var l=u.target;l.localName==="img"&&(!V(a.filter)||a.filter.call(i,l))&&i.view(i.images.indexOf(l))})}}},{key:"build",value:function(){if(!this.ready){var i=this.element,t=this.options,a=i.parentNode,s=document.createElement("div");s.innerHTML=ha;var o=s.querySelector(".".concat(D,"-container")),r=o.querySelector(".".concat(D,"-title")),c=o.querySelector(".".concat(D,"-toolbar")),u=o.querySelector(".".concat(D,"-navbar")),l=o.querySelector(".".concat(D,"-button")),d=o.querySelector(".".concat(D,"-canvas"));if(this.parent=a,this.viewer=o,this.title=r,this.toolbar=c,this.navbar=u,this.button=l,this.canvas=d,this.footer=o.querySelector(".".concat(D,"-footer")),this.tooltipBox=o.querySelector(".".concat(D,"-tooltip")),this.player=o.querySelector(".".concat(D,"-player")),this.list=o.querySelector(".".concat(D,"-list")),o.id="".concat(D).concat(this.id),r.id="".concat(D,"Title").concat(this.id),k(r,t.title?je(Array.isArray(t.title)?t.title[0]:t.title):pe),k(u,t.navbar?je(t.navbar):pe),Be(l,pe,!t.button),t.keyboard&&l.setAttribute("tabindex",0),t.backdrop&&(k(o,"".concat(D,"-backdrop")),!t.inline&&t.backdrop!=="static"&&wt(d,nt,"hide")),He(t.className)&&t.className&&t.className.split(St).forEach(function(E){k(o,E)}),t.toolbar){var f=document.createElement("ul"),h=Se(t.toolbar),p=qe.slice(0,3),g=qe.slice(7,9),C=qe.slice(9);h||k(c,je(t.toolbar)),P(h?t.toolbar:qe,function(E,H){var B=h&&Se(E),x=h?xt(H):E,z=B&&!Ie(E.show)?E.show:E;if(!(!z||!t.zoomable&&p.indexOf(x)!==-1||!t.rotatable&&g.indexOf(x)!==-1||!t.scalable&&C.indexOf(x)!==-1)){var q=B&&!Ie(E.size)?E.size:E,j=B&&!Ie(E.click)?E.click:E,K=document.createElement("li");t.keyboard&&K.setAttribute("tabindex",0),K.setAttribute("role","button"),k(K,"".concat(D,"-").concat(x)),V(j)||wt(K,nt,x),W(z)&&k(K,je(z)),["small","large"].indexOf(q)!==-1?k(K,"".concat(D,"-").concat(q)):x==="play"&&k(K,"".concat(D,"-large")),V(j)&&I(K,ze,j),f.appendChild(K)}}),c.appendChild(f)}else k(c,pe);if(!t.rotatable){var b=c.querySelectorAll('li[class*="rotate"]');k(b,Fe),P(b,function(E){c.appendChild(E)})}if(t.inline)k(l,ma),oe(o,{zIndex:t.zIndexInline}),window.getComputedStyle(a).position==="static"&&oe(a,{position:"relative"}),a.insertBefore(o,i.nextSibling);else{k(l,va),k(o,gt),k(o,Ze),k(o,pe),oe(o,{zIndex:t.zIndex});var w=t.container;He(w)&&(w=i.ownerDocument.querySelector(w)),w||(w=this.body),w.appendChild(o)}if(t.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,V(t.ready)&&I(i,Xt,t.ready,{once:!0}),X(i,Xt)===!1){this.ready=!1;return}this.ready&&t.inline&&this.view(this.index)}}}],[{key:"noConflict",value:function(){return window.Viewer=Ra,n}},{key:"setDefaults",value:function(i){Z(Vt,Se(i)&&i)}}]),n}();Z(Si.prototype,za,Oa,Na,Va,$a);const Fa={__name:"CustomImage",props:{src:{type:String,default:""},preview:{type:Object,default:()=>[]},initialIndex:{type:Number,default:0}},emits:["load"],setup(n,{emit:e}){const i=n,t=()=>{if(!i.preview.length)return;const s=document.createElement("div");i.preview.forEach(r=>{var c=document.createElement("img");c.setAttribute("src",r),c.setAttribute("data-src",r),s.appendChild(c)}),new Si(s,{initialViewIndex:i.initialIndex,minZoomRatio:.2,navbar:!1}).show()},a=()=>{e("load")};return ce(()=>{}),(s,o)=>{const r=it("lazy");return _(),S("div",{class:"CustomImage",onClick:t},[ee(T("img",{draggable:"false",onLoad:a,onError:a},null,544),[[r,n.src]])])}}},Ma={key:1,class:"flex-center image-wrap"},Ua={key:2,class:"text"},Ha={class:"text-inner"},Ba={key:3,class:"url ov-1"},Wa={key:4,class:"video"},Ya={key:1},Xa=["src","poster"],qa={__name:"PrePane",setup(n){const e=vt("redrawVueMasonry"),i=we(),t=vt("favoriteData"),a=N(0),s=N(!1),o=O(()=>{var h;return((h=i.favoriteList)==null?void 0:h.filter(p=>p.type==="img"))||[]}),r=O(()=>o.value.findIndex(h=>h.id===t.value.id)||0),c=O(()=>o.value.map(h=>h.displayUrl)),u=()=>{e()},l=()=>{const h={text:()=>{Bi(t.value.content,()=>{mi.success("已复制")})},url:()=>{Tt.confirm(`是否前往${t.value.title}?`,"注意",{confirmButtonText:"立即前往",cancelButtonText:"取消"}).then(()=>{window.open(t.value.content,"_blank")}).catch(()=>{})}};h[t.value.type]&&h[t.value.type]()},d=async h=>{await st({id:t.value.id,nsfw:h})},f=()=>{s.value||(s.value=!0)};return ce(()=>{a.value=t.value.nsfw}),le(()=>t.value.nsfw,h=>{a.value=h}),(h,p)=>{const g=bi,C=yt("v-icon"),b=G,w=it("lazy");return _(),S("div",{class:"PrePane",onClick:l},[v(t).type!=="video"?(_(),S("div",{key:0,class:"nswf",onClick:p[1]||(p[1]=se(()=>{},["stop"]))},[y(g,{modelValue:a.value,"onUpdate:modelValue":p[0]||(p[0]=E=>a.value=E),"inactive-value":1,size:"small",style:{"--el-switch-on-color":"#5dca91","--el-switch-off-color":"#ff4242"},"active-value":0,"inline-prompt":"","active-text":"SFW","inactive-text":"NSFW",onChange:d},null,8,["modelValue"])])):U("",!0),v(t).type==="img"?(_(),S("div",Ma,[y(Fa,{src:v(t).thumbnailUrl,preview:c.value,"initial-index":r.value,onLoad:u},null,8,["src","preview","initial-index"])])):U("",!0),v(t).type==="text"?(_(),S("div",Ua,[T("div",Ha,ve(v(t).content),1)])):U("",!0),v(t).type==="url"?(_(),S("div",Ba,ve(v(t).title),1)):U("",!0),v(t).type==="video"?(_(),S("div",Wa,[s.value?U("",!0):(_(),S("div",{key:0,class:"play-btn",onClick:f},[y(b,{class:"play-icon",size:60,color:"#fff"},{default:R(()=>[y(C,{icon:"mdi:play"})]),_:1})])),s.value?(_(),S("video",{key:2,src:v(t).videoPath,controls:"",loop:"",muted:"",poster:v(t).cover,autoplay:""},null,8,Xa)):ee((_(),S("img",Ya,null,512)),[[w,v(t).cover]])])):U("",!0)])}}};const ja={class:"ToolPane"},Ka={class:"ago"},Ga={key:0,class:"footer"},Za={key:0,class:"flex-center"},Ja=["href","title"],Qa={class:"tool-bar"},es={__name:"ToolPane",setup(n){const e=we(),i=vt("favoriteData"),t=N(null),{loading:a,fetchData:s}=Ei(),o=async()=>{await s(st,{id:i.value.id,is_show:1})&&(Me({title:"操作成功",message:"已恢复",type:"success"}),e.UPDATE_FAVORITE_LIST(e.favoriteList.filter(l=>l.id!==i.value.id)))},r=()=>{Tt.confirm(`${i.value.is_show===0?"删除后不可恢复,":""}确定要删除吗?`,"",{confirmButtonText:"删除",cancelButtonText:"取消"}).then(async()=>{const u=i.value.is_show===0?"FavoriteDelUsePOST":"FavoriteUpdateUsePOST",l={id:i.value.id};i.value.is_show&&(l.is_show=0),await s(sn[u],l)&&(Me({title:"操作成功",message:i.value.is_show?"移除成功, 可在回收站找回":"已删除",type:"success"}),e.UPDATE_FAVORITE_LIST(e.favoriteList.filter(f=>f.id!==i.value.id)))}).catch(()=>{})},c=()=>{e.UPDATE_SELECT_EDIT(i.value),e.UPDATE_EDIT_SHOW(!0)};return ce(()=>{t.value=Wi(i.value.origin)}),(u,l)=>{const d=yt("v-icon"),f=G,h=qn;return _(),S("div",ja,[T("p",Ka,ve(v(Yi)(v(i).update_date)),1),v(i).type!=="video"?(_(),S("div",Ga,[t.value?(_(),S("div",Za,[y(h,{class:"favicon",src:t.value.origin+"/favicon.ico",lazy:"",fit:"cover",draggable:"false"},{error:R(()=>[y(f,{size:18,color:"slateblue"},{default:R(()=>[y(d,{icon:"ic:baseline-web"})]),_:1})]),_:1},8,["src"]),T("a",{href:v(i).origin,class:"ov-1",title:v(i).origin,target:"_blank"},ve(t.value.host),9,Ja)])):U("",!0),T("div",Qa,[v(i).is_show===1?(_(),re(f,{key:0,size:18,class:"edit",title:"编辑",onClick:se(c,["stop"])},{default:R(()=>[y(d,{icon:"mdi:pencil"})]),_:1},8,["onClick"])):(_(),re(f,{key:1,size:18,class:"edit restore",title:"还原",onClick:se(o,["stop"])},{default:R(()=>[y(d,{icon:"mdi:backup-restore"})]),_:1},8,["onClick"])),y(f,{size:18,class:"edit",title:"删除",onClick:se(r,["stop"])},{default:R(()=>[y(d,{icon:"mdi:delete-forever"})]),_:1},8,["onClick"])])])):U("",!0)])}}},ts={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},is=T("path",{fill:"currentColor",d:"M77.248 415.04a64 64 0 0 1 90.496 0l226.304 226.304L846.528 188.8a64 64 0 1 1 90.56 90.496l-543.04 543.04l-316.8-316.8a64 64 0 0 1 0-90.496z"},null,-1),ns=[is];function as(n,e){return _(),S("svg",ts,ns)}const ss={name:"ep-select",render:as};const os=["onClick"],rs={__name:"CheckBox",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(n,{emit:e}){const i=n,t=N(!1),a=()=>{t.value=!t.value,e("change",t.value)};return ce(()=>{t.value=i.modelValue}),le(()=>i.modelValue,s=>{t.value=s}),le(()=>t.value,s=>{e("update:modelValue",s)}),(s,o)=>{const r=ss,c=G;return _(),S("div",{class:M(["check-box",{checked:t.value}]),onClick:se(a,["stop"])},[y(c,{size:18,color:t.value?"#fff":"#333"},{default:R(()=>[y(r)]),_:1},8,["color"])],10,os)}}},ls=_i(rs,[["__scopeId","data-v-2d8d4aa3"]]),cs=["draggable","drag-over"],li={__name:"FavoriteCard",props:{data:{type:Object,default:()=>({})}},setup(n){const e=n;tn("favoriteData",O(()=>e.data));const i=we(),t=N(!1),a=N(!1),s=N(""),o=O(()=>i.dragIn),r=O(()=>i.dragData),c=O(()=>i.checkList),u=()=>{Array.from(document.querySelectorAll("div[drag-over]")).forEach(b=>{b.toggleAttribute("drag-over",!1)}),s.value=""},l=b=>{if(e.data.type==="video")return;i.UPDATE_DRAGIN(!0),a.value=!0;const{offsetX:w,offsetY:E}=b;i.UPDATE_DRAG_DATA(e.data),setTimeout(()=>{const H=document.querySelector(".favorite-card[dragging]");H.style.transform=`translate(${w}px, ${E}px)`},0)},d=b=>{e.data.type!=="video"&&(i.UPDATE_DRAG_DATA(null),i.UPDATE_DRAGIN(!1),setTimeout(()=>{a.value=!1,u()},0))},f=b=>{b.preventDefault();const{target:w,layerX:E}=b;Xi(w,"drag")||(E<=w.clientWidth&&E>=0?E>w.clientWidth/2?s.value!=="right"&&(s.value="right"):s.value!=="left"&&(s.value="left"):s.value&&(s.value=""))},h=b=>{b.preventDefault()},p=b=>{b.preventDefault(),s.value=""},g=async b=>{if(b.preventDefault(),console.log(`${r.value.id} 放置到 ${e.data.id} ${s.value==="left"?"前":"后"}`),r.value.id===e.data.id)return;const w={id:r.value.id,targetId:e.data.id,position:s.value==="left"?1:0,dragPosition:s.value},E=await on(w),{success:H,data:B}=E;H&&i.UPDATE_FAVORITE_LIST(qi(i.favoriteList,w.id,w.targetId,w.dragPosition))},C=()=>{c.value.length&&(t.value=!t.value)};return ce(()=>{t.value=c.value.some(b=>b.id===e.data.id)}),le(()=>t.value,b=>{b?c.value.every(w=>w.id!==e.data.id)&&i.UPDATE_CHECK_LIST([...c.value,e.data]):i.UPDATE_CHECK_LIST(c.value.filter(w=>w.id!==e.data.id))}),le(()=>c.value,b=>{t.value=b.some(w=>w.id===e.data.id)}),(b,w)=>(_(),S("div",{class:M(["favorite-card",{drag:a.value,"video-card":e.data.type==="video",checked:t.value,"check-mode":c.value.length}]),draggable:e.data.type!=="video",onDragstart:l,onDragend:d,onDragenter:h,onDragleave:p,onDragover:f,onDrop:g,"drag-over":s.value,onClick:w[1]||(w[1]=se(()=>{},["stop"]))},[e.data.type!=="video"?(_(),re(ls,{key:0,class:"card-check",modelValue:t.value,"onUpdate:modelValue":w[0]||(w[0]=E=>t.value=E)},null,8,["modelValue"])):U("",!0),c.value.length?(_(),S("div",{key:1,class:M(["check-mask",{"no-events":o.value}]),onClick:C},null,2)):U("",!0),T("div",{class:M(["drag-title ov-1",{"no-events":o.value}])},ve(e.data.title),3),y(qa,{class:M(["favorite-card--preview",{"no-events":o.value}])},null,8,["class"]),y(es,{class:M(["favorite-card--desc",{"no-events":o.value}])},null,8,["class"])],42,cs))}},us={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ds=T("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64zm384-253.696l236.288-236.352l45.248 45.248L508.8 704L192 387.2l45.248-45.248L480 584.704V128h64v450.304z"},null,-1),fs=[ds];function hs(n,e){return _(),S("svg",us,fs)}const vs={name:"ep-download",render:hs},ms={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ps=T("path",{fill:"currentColor",d:"M512 64h64v192h-64V64zm0 576h64v192h-64V640zM160 480v-64h192v64H160zm576 0v-64h192v64H736zM249.856 199.04l45.248-45.184L430.848 289.6L385.6 334.848L249.856 199.104zM657.152 606.4l45.248-45.248l135.744 135.744l-45.248 45.248L657.152 606.4zM114.048 923.2L68.8 877.952l316.8-316.8l45.248 45.248l-316.8 316.8zM702.4 334.848L657.152 289.6l135.744-135.744l45.248 45.248L702.4 334.848z"},null,-1),gs=[ps];function _s(n,e){return _(),S("svg",ms,gs)}const ws={name:"ep-magic-stick",render:_s},bs={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ys=T("path",{fill:"currentColor",d:"M224 160a64 64 0 0 0-64 64v576a64 64 0 0 0 64 64h576a64 64 0 0 0 64-64V224a64 64 0 0 0-64-64H224zm0-64h576a128 128 0 0 1 128 128v576a128 128 0 0 1-128 128H224A128 128 0 0 1 96 800V224A128 128 0 0 1 224 96z"},null,-1),Es=T("path",{fill:"currentColor",d:"M384 416a64 64 0 1 0 0-128a64 64 0 0 0 0 128zm0 64a128 128 0 1 1 0-256a128 128 0 0 1 0 256z"},null,-1),Ts=T("path",{fill:"currentColor",d:"M480 320h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32zm160 416a64 64 0 1 0 0-128a64 64 0 0 0 0 128zm0 64a128 128 0 1 1 0-256a128 128 0 0 1 0 256z"},null,-1),ks=T("path",{fill:"currentColor",d:"M288 640h256q32 0 32 32t-32 32H288q-32 0-32-32t32-32z"},null,-1),Cs=[ys,Es,Ts,ks];function Is(n,e){return _(),S("svg",bs,Cs)}const Ss={name:"ep-set-up",render:Is},xs={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Ds=T("path",{fill:"currentColor",d:"M764.288 214.592L512 466.88L259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512L214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),Ls=[Ds];function As(n,e){return _(),S("svg",xs,Ls)}const zs={name:"ep-close",render:As},Os={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Ns=T("path",{fill:"currentColor",d:"M406.656 706.944L195.84 496.256a32 32 0 1 0-45.248 45.248l256 256l512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),Vs=[Ns];function $s(n,e){return _(),S("svg",Os,Vs)}const Rs={name:"ep-check",render:$s},Ps={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Fs=T("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),Ms=[Fs];function Us(n,e){return _(),S("svg",Ps,Ms)}const Hs={name:"ep-loading",render:Us};const ut={__name:"IconButton",props:{loading:{type:Boolean,default:!1},success:{type:Boolean,default:!1},error:{type:Boolean,default:!1}},setup(n){const e=n;return(i,t)=>{const a=Hs,s=Rs,o=zs,r=G;return _(),re(r,{size:18,class:M(["order-icon",{"is-loading":e.loading,success:e.success,error:e.error}])},{default:R(()=>[ee(T("span",null,[De(i.$slots,"default")],512),[[ge,!e.loading&&!e.success&&!e.error]]),ee(y(a,null,null,512),[[ge,e.loading]]),ee(y(s,null,null,512),[[ge,e.success]]),ee(y(o,null,null,512),[[ge,e.error]])]),_:3},8,["class"])}}};const Bs={class:"sort-bar"},Ws={class:"tabs"},Ys=["onClick"],Xs={class:"sort-btn",title:"瀑布流"},qs={class:"sort-btn",title:"重置索引"},js={class:"sort-btn",title:"反向"},Ks={key:1,class:"get-cover sort-btn",title:"转换"},Gs={__name:"SortBar",emits:["typeChange","sort"],setup(n,{emit:e}){const i=we(),t=Et(),a=[{label:"ALL",key:""},{label:"IMG",key:"img"},{label:"TEXT",key:"text"},{label:"URL",key:"url"}],s=O(()=>t.params.tid==="video"),o=N(0),r=N(!1),c=N(!1),u=N(!1),l=N(!1),d=()=>{i.UPDATE_WATERFALL(!i.waterfall)},f=()=>{r.value=!r.value,e("sort",r.value)},h=(C,b)=>{o.value=C,e("typeChange",b)},p=async()=>{if(c.value||u.value||l.value)return;c.value=!0;const C=await rn();c.value=!1,u.value=C.success,l.value=!C.success,setTimeout(()=>{u.value=!1,l.value=!1},1e3)},g=async()=>{if(c.value||u.value||l.value)return;c.value=!0;const C=await ln();c.value=!1,u.value=C.success,l.value=!C.success,setTimeout(()=>{u.value=!1,l.value=!1},1e3)};return(C,b)=>{const w=Ss,E=ws,H=yt("v-icon"),B=G,x=vs;return _(),S("div",Bs,[s.value?U("",!0):(_(),S(he,{key:0},[T("div",Ws,[(_(),S(he,null,tt(a,(z,q)=>T("div",{class:M(["tab-item",{active:o.value===q}]),key:z.label,onClick:j=>h(q,z)},ve(z.label),11,Ys)),64))]),T("div",Xs,[y(ut,{onClick:d},{default:R(()=>[y(w)]),_:1})]),T("div",qs,[y(ut,ht({onClick:g},{loading:c.value,success:u.value,error:l.value}),{default:R(()=>[y(E)]),_:1},16)]),T("div",js,[y(B,{size:18,class:M(["order-icon",{desc:r.value}]),onClick:f},{default:R(()=>[y(H,{icon:"humbleicons:exchange-horizontal"})]),_:1},8,["class"])])],64)),s.value?(_(),S("div",Ks,[y(ut,ht({onClick:p},{loading:c.value,success:u.value,error:l.value}),{default:R(()=>[y(x)]),_:1},16)])):U("",!0)])}}};const Zs={class:"check-tip"},Js={class:"check-all"},Qs={class:"popup-right"},eo=["onClick"],to=["onClick"],io={__name:"Check",setup(n){const e=Et(),{fetch:i}=nn(),t=we(),a=N(!1),s=O(()=>t.checkList),o=O(()=>t.favoriteList),r=O(()=>e.params.tid),c=N(0),u=(f=!0)=>{t.UPDATE_CHECK_LIST(f?o.value:[])},l=(f=!0)=>{Tt.confirm(`确定要${f?"删除":"恢复"}吗?`,"",{confirmButtonText:f?"删除":"恢复",cancelButtonText:"取消"}).then(async()=>{const h=s.value.map(g=>g.id);await i(cn,{ids:h,is_show:f?0:1,del:r.value==="recovery"&&f?1:0})&&(Me({title:"操作成功",type:"success"}),t.UPDATE_CHECK_LIST([]),t.UPDATE_FAVORITE_LIST(o.value.filter(g=>!h.includes(g.id))))}).catch(()=>{})},d=async f=>{const h=s.value.map(g=>g.id);await i(st,{ids:h,nsfw:f})&&(t.UPDATE_FAVORITE_LIST(o.value.map(g=>({...g,nsfw:h.includes(g.id)?f:g.nsfw}))),Me({title:"操作成功",type:"success"}))};return le(()=>s.value,f=>{a.value=!!f.length,f.length&&(c.value=f[0].nsfw)}),ce(()=>{document.body.addEventListener("click",()=>{s.value&&t.UPDATE_CHECK_LIST([])})}),(f,h)=>{const p=bi;return _(),re(gi,{to:"body"},[y(pi,{name:"slide"},{default:R(()=>[a.value?(_(),S("div",{key:0,class:"popup",onClick:h[3]||(h[3]=se(()=>{},["stop"]))},[T("div",Zs,"已选择 "+ve(s.value.length)+" 项, 当前页共加载 "+ve(o.value.length)+" 项",1),T("span",Js,[y(p,{modelValue:c.value,"onUpdate:modelValue":h[0]||(h[0]=g=>c.value=g),"inactive-value":1,style:{"--el-switch-on-color":"#5dca91","--el-switch-off-color":"#ff4242","--el-color-primary":"#f101eb"},"active-value":0,"active-text":"SFW","inactive-text":"NSFW",onChange:d},null,8,["modelValue"])]),T("div",Qs,[T("span",{class:"check-all",onClick:se(u,["stop"])},"全选",8,eo),T("span",{class:"check-all",onClick:h[1]||(h[1]=se(g=>u(!1),["stop"]))},"取消"),r.value==="recovery"?(_(),S("span",{key:0,class:"check-all restore",onClick:h[2]||(h[2]=g=>l(!1))},"恢复")):U("",!0),T("span",{class:"check-all del",onClick:se(l,["stop"])},"删除",8,to)])])):U("",!0)]),_:1})])}}},no=_i(io,[["__scopeId","data-v-ca511e57"]]);const ao={class:"collect"},so={key:0,class:"card-wrap waterfall","transition-duration":"0.25s","item-selector":".favorite-card"},oo={key:1,class:"card-wrap"},ro={class:"tip"},lo={class:"tip"},go={__name:"collect",setup(n){const e=we(),i=Et(),{fetchData:t,loading:a,finished:s,page:o,pageSize:r}=an(),c=O(()=>i.params.tid==="video"),u=O(()=>e.sort),l=O(()=>e.type),d=O(()=>e.nsfw),f=O(()=>e.waterfall),h=O(()=>e.favoriteList),p=w=>{e.UPDATE_SORT(w),C()},g=({key:w})=>{e.UPDATE_TYPE(w),C()},C=()=>{o.value=1,e.UPDATE_FAVORITE_LIST([]),s.value=!1,b()},b=async()=>{const w=c.value?un:dn,E={pageSize:r.value,page:o.value,nsfw:d.value,type:l.value,sort:u.value,tid:isNaN(parseInt(i.params.tid))?"":i.params.tid,is_show:i.params.tid==="recovery"?0:1};t(w,E),c.value&&(s.value=!0)};return ce(()=>{e.UPDATE_FAVORITE_LIST([])}),(w,E)=>{const H=it("masonry-tile"),B=it("masonry"),x=ea;return _(),S(he,null,[T("div",ao,[y(Gs,{onTypeChange:g,onSort:p}),ee((_(),re(la,{"infinite-scroll-disabled":v(s)||v(a),"infinite-scroll-distance":0},{default:R(()=>[f.value?ee((_(),S("div",so,[(_(!0),S(he,null,tt(h.value,z=>ee((_(),re(li,{key:z.id,data:z},null,8,["data"])),[[H]])),128))])),[[B]]):(_(),S("div",oo,[(_(!0),S(he,null,tt(h.value,z=>(_(),re(li,{key:z.id,data:z},null,8,["data"]))),128))])),ee(T("p",ro,"加载中...",512),[[ge,v(a)]]),ee(T("p",lo,"没有了",512),[[ge,v(s)&&!v(a)]])]),_:1},8,["infinite-scroll-disabled"])),[[x,b]])]),y(no)],64)}}};export{go as default};
