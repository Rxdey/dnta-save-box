import{i as Te,B as Si,C as Je,D as xi,c as ui,d as ut,F as di,e as bt,G as Di,H as Li,v as hi,g as fi,n as Ai,r as G,I as zi,J as Oi,K as Ni,L as $i,M as Vi,N as Ri,O as Pi,_ as vi,E as ye,h as Ce,P as Mi,w as mi,m as Fi,Q as Ui,A as gi,x as be,R as Hi,S as Bi,T as Wi,U as Yi,V as Xi}from"./el-message-2553baf5.js";import{d as at,a2 as Lt,r as R,a3 as qi,s as ji,c as O,w as le,y as Qe,o as ce,f as p,h as re,x as y,j as V,l as E,n as F,u as f,m as dt,W as se,D as U,q as S,F as fe,C as Ki,a1 as et,k as ee,v as pe,B as De,T as pi,L as _i,a4 as Gi,P as ve,J as ht,a5 as Zi,i as Ji,Z as Qi,Y as tt,e as ft,R as wt,_ as yt,p as en,$ as Et}from"./index-d0deb4f3.js";import{u as tn,a as nn}from"./useFetch-0d25fcb2.js";import{F as Tt,c as it,E as an,h as sn,i as on,V as rn,j as ln,k as cn,l as un,m as dn}from"./el-notification-0339ceb8.js";import{u as hn,g as bi,t as fn,_ as vn,d as mn,b as gn,a as kt}from"./el-switch-25c6b9fe.js";const pn=(n,e)=>{if(!Te||!n||!e)return!1;const i=n.getBoundingClientRect();let t;return e instanceof Element?t=e.getBoundingClientRect():t={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},i.top<t.bottom&&i.bottom>t.top&&i.right>t.left&&i.left<t.right},At=n=>{let e=0,i=n;for(;i;)e+=i.offsetTop,i=i.offsetParent;return e},_n=(n,e)=>Math.abs(At(n)-At(e));var bn=/\s/;function wn(n){for(var e=n.length;e--&&bn.test(n.charAt(e)););return e}var yn=/^\s+/;function En(n){return n&&n.slice(0,wn(n)+1).replace(yn,"")}var zt=0/0,Tn=/^[-+]0x[0-9a-f]+$/i,kn=/^0b[01]+$/i,Cn=/^0o[0-7]+$/i,In=parseInt;function Ot(n){if(typeof n=="number")return n;if(Si(n))return zt;if(Je(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=Je(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=En(n);var i=kn.test(n);return i||Cn.test(n)?In(n.slice(2),i?2:8):Tn.test(n)?zt:+n}var Sn=function(){return xi.Date.now()};const ot=Sn;var xn="Expected a function",Dn=Math.max,Ln=Math.min;function An(n,e,i){var t,a,s,o,l,u,c=0,r=!1,d=!1,h=!0;if(typeof n!="function")throw new TypeError(xn);e=Ot(e)||0,Je(i)&&(r=!!i.leading,d="maxWait"in i,s=d?Dn(Ot(i.maxWait)||0,e):s,h="trailing"in i?!!i.trailing:h);function m(x){var z=t,q=a;return t=a=void 0,c=x,o=n.apply(q,z),o}function g(x){return c=x,l=setTimeout(b,e),r?m(x):o}function T(x){var z=x-u,q=x-c,j=e-z;return d?Ln(j,s-q):j}function C(x){var z=x-u,q=x-c;return u===void 0||z>=e||z<0||d&&q>=s}function b(){var x=ot();if(C(x))return _(x);l=setTimeout(b,T(x))}function _(x){return l=void 0,h&&t?m(x):(t=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),c=0,t=u=a=l=void 0}function H(){return l===void 0?o:_(ot())}function B(){var x=ot(),z=C(x);if(t=arguments,a=this,u=x,z){if(l===void 0)return g(u);if(d)return clearTimeout(l),l=setTimeout(b,e),m(u)}return l===void 0&&(l=setTimeout(b,e)),o}return B.cancel=w,B.flush=H,B}var zn="Expected a function";function Pe(n,e,i){var t=!0,a=!0;if(typeof n!="function")throw new TypeError(zn);return Je(i)&&(t="leading"in i?!!i.leading:t,a="trailing"in i?!!i.trailing:a),An(n,e,{leading:t,maxWait:e,trailing:a})}const On=ui({urlList:{type:ut(Array),default:()=>di([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1},teleported:{type:Boolean,default:!1},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),Nn={close:()=>!0,switch:n=>bt(n)},$n=["src"],Vn=at({name:"ElImageViewer"}),Rn=at({...Vn,props:On,emits:Nn,setup(n,{expose:e,emit:i}){const t=n,a={CONTAIN:{name:"contain",icon:Lt(Di)},ORIGINAL:{name:"original",icon:Lt(Li)}},{t:s}=hi(),o=fi("image-viewer"),{nextZIndex:l}=Ai(),u=R(),c=R([]),r=qi(),d=R(!0),h=R(t.initialIndex),m=ji(a.CONTAIN),g=R({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),T=O(()=>{const{urlList:v}=t;return v.length<=1}),C=O(()=>h.value===0),b=O(()=>h.value===t.urlList.length-1),_=O(()=>t.urlList[h.value]),w=O(()=>{const{scale:v,deg:L,offsetX:M,offsetY:J,enableTransition:de}=g.value;let ie=M/v,he=J/v;switch(L%360){case 90:case-270:[ie,he]=[he,-ie];break;case 180:case-180:[ie,he]=[-ie,-he];break;case 270:case-90:[ie,he]=[-he,ie];break}const we={transform:`scale(${v}) rotate(${L}deg) translate(${ie}px, ${he}px)`,transition:de?"transform .3s":""};return m.value.name===a.CONTAIN.name&&(we.maxWidth=we.maxHeight="100%"),we}),H=O(()=>bt(t.zIndex)?t.zIndex:l());function B(){z(),i("close")}function x(){const v=Pe(M=>{switch(M.code){case ye.esc:t.closeOnPressEscape&&B();break;case ye.space:$e();break;case ye.left:Be();break;case ye.up:ue("zoomIn");break;case ye.right:We();break;case ye.down:ue("zoomOut");break}}),L=Pe(M=>{const J=M.deltaY||M.deltaX;ue(J<0?"zoomIn":"zoomOut",{zoomRate:t.zoomRate,enableTransition:!1})});r.run(()=>{Ce(document,"keydown",v),Ce(document,"wheel",L)})}function z(){r.stop()}function q(){d.value=!1}function j(v){d.value=!1,v.target.alt=s("el.image.error")}function K(v){if(d.value||v.button!==0||!u.value)return;g.value.enableTransition=!1;const{offsetX:L,offsetY:M}=g.value,J=v.pageX,de=v.pageY,ie=Pe(we=>{g.value={...g.value,offsetX:L+we.pageX-J,offsetY:M+we.pageY-de}}),he=Ce(document,"mousemove",ie);Ce(document,"mouseup",()=>{he()}),v.preventDefault()}function Ne(){g.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function $e(){if(d.value)return;const v=Mi(a),L=Object.values(a),M=m.value.name,de=(L.findIndex(ie=>ie.name===M)+1)%v.length;m.value=a[v[de]],Ne()}function Ve(v){const L=t.urlList.length;h.value=(v+L)%L}function Be(){C.value&&!t.infinite||Ve(h.value-1)}function We(){b.value&&!t.infinite||Ve(h.value+1)}function ue(v,L={}){if(d.value)return;const{zoomRate:M,rotateDeg:J,enableTransition:de}={zoomRate:t.zoomRate,rotateDeg:90,enableTransition:!0,...L};switch(v){case"zoomOut":g.value.scale>.2&&(g.value.scale=Number.parseFloat((g.value.scale/M).toFixed(3)));break;case"zoomIn":g.value.scale<7&&(g.value.scale=Number.parseFloat((g.value.scale*M).toFixed(3)));break;case"clockwise":g.value.deg+=J;break;case"anticlockwise":g.value.deg-=J;break}g.value.enableTransition=de}return le(_,()=>{Qe(()=>{const v=c.value[0];v!=null&&v.complete||(d.value=!0)})}),le(h,v=>{Ne(),i("switch",v)}),ce(()=>{var v,L;x(),(L=(v=u.value)==null?void 0:v.focus)==null||L.call(v)}),e({setActiveItem:Ve}),(v,L)=>(p(),re(_i,{to:"body",disabled:!v.teleported},[y(pi,{name:"viewer-fade",appear:""},{default:V(()=>[E("div",{ref_key:"wrapper",ref:u,tabindex:-1,class:F(f(o).e("wrapper")),style:dt({zIndex:f(H)})},[E("div",{class:F(f(o).e("mask")),onClick:L[0]||(L[0]=se(M=>v.hideOnClickModal&&B(),["self"]))},null,2),U(" CLOSE "),E("span",{class:F([f(o).e("btn"),f(o).e("close")]),onClick:B},[y(f(G),null,{default:V(()=>[y(f(zi))]),_:1})],2),U(" ARROW "),f(T)?U("v-if",!0):(p(),S(fe,{key:0},[E("span",{class:F([f(o).e("btn"),f(o).e("prev"),f(o).is("disabled",!v.infinite&&f(C))]),onClick:Be},[y(f(G),null,{default:V(()=>[y(f(Oi))]),_:1})],2),E("span",{class:F([f(o).e("btn"),f(o).e("next"),f(o).is("disabled",!v.infinite&&f(b))]),onClick:We},[y(f(G),null,{default:V(()=>[y(f(Ni))]),_:1})],2)],64)),U(" ACTIONS "),E("div",{class:F([f(o).e("btn"),f(o).e("actions")])},[E("div",{class:F(f(o).e("actions__inner"))},[y(f(G),{onClick:L[1]||(L[1]=M=>ue("zoomOut"))},{default:V(()=>[y(f($i))]),_:1}),y(f(G),{onClick:L[2]||(L[2]=M=>ue("zoomIn"))},{default:V(()=>[y(f(Vi))]),_:1}),E("i",{class:F(f(o).e("actions__divider"))},null,2),y(f(G),{onClick:$e},{default:V(()=>[(p(),re(Ki(f(m).icon)))]),_:1}),E("i",{class:F(f(o).e("actions__divider"))},null,2),y(f(G),{onClick:L[3]||(L[3]=M=>ue("anticlockwise"))},{default:V(()=>[y(f(Ri))]),_:1}),y(f(G),{onClick:L[4]||(L[4]=M=>ue("clockwise"))},{default:V(()=>[y(f(Pi))]),_:1})],2)],2),U(" CANVAS "),E("div",{class:F(f(o).e("canvas"))},[(p(!0),S(fe,null,et(v.urlList,(M,J)=>ee((p(),S("img",{ref_for:!0,ref:de=>c.value[J]=de,key:M,src:M,style:dt(f(w)),class:F(f(o).e("img")),onLoad:q,onError:j,onMousedown:K},null,46,$n)),[[pe,J===h.value]])),128))],2),De(v.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var Pn=vi(Rn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const Mn=mi(Pn),Fn=ui({hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:{type:Boolean,default:!1},scrollContainer:{type:ut([String,Object])},previewSrcList:{type:ut(Array),default:()=>di([])},previewTeleported:{type:Boolean,default:!1},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),Un={load:n=>n instanceof Event,error:n=>n instanceof Event,switch:n=>bt(n),close:()=>!0,show:()=>!0},Hn=["src","loading"],Bn={key:0},Wn=at({name:"ElImage",inheritAttrs:!1}),Yn=at({...Wn,props:Fn,emits:Un,setup(n,{emit:e}){const i=n;let t="";const{t:a}=hi(),s=fi("image"),o=Gi(),l=hn(),u=R(),c=R(!1),r=R(!0),d=R(!1),h=R(),m=R(),g=Te&&"loading"in HTMLImageElement.prototype;let T,C;const b=O(()=>o.style),_=O(()=>{const{fit:v}=i;return Te&&v?{objectFit:v}:{}}),w=O(()=>{const{previewSrcList:v}=i;return Array.isArray(v)&&v.length>0}),H=O(()=>{const{previewSrcList:v,initialIndex:L}=i;let M=L;return L>v.length-1&&(M=0),M}),B=O(()=>i.loading==="eager"?!1:!g&&i.loading==="lazy"||i.lazy),x=()=>{Te&&(r.value=!0,c.value=!1,u.value=i.src)};function z(v){r.value=!1,c.value=!1,e("load",v)}function q(v){r.value=!1,c.value=!0,e("error",v)}function j(){pn(h.value,m.value)&&(x(),$e())}const K=Ui(j,200,!0);async function Ne(){var v;if(!Te)return;await Qe();const{scrollContainer:L}=i;Fi(L)?m.value=L:Zi(L)&&L!==""?m.value=(v=document.querySelector(L))!=null?v:void 0:h.value&&(m.value=bi(h.value)),m.value&&(T=Ce(m,"scroll",K),setTimeout(()=>j(),100))}function $e(){!Te||!m.value||!K||(T==null||T(),m.value=void 0)}function Ve(v){if(v.ctrlKey){if(v.deltaY<0)return v.preventDefault(),!1;if(v.deltaY>0)return v.preventDefault(),!1}}function Be(){w.value&&(C=Ce("wheel",Ve,{passive:!1}),t=document.body.style.overflow,document.body.style.overflow="hidden",d.value=!0,e("show"))}function We(){C==null||C(),document.body.style.overflow=t,d.value=!1,e("close")}function ue(v){e("switch",v)}return le(()=>i.src,()=>{B.value?(r.value=!0,c.value=!1,$e(),Ne()):x()}),ce(()=>{B.value?Ne():x()}),(v,L)=>(p(),S("div",{ref_key:"container",ref:h,class:F([f(s).b(),v.$attrs.class]),style:dt(f(b))},[c.value?De(v.$slots,"error",{key:0},()=>[E("div",{class:F(f(s).e("error"))},ve(f(a)("el.image.error")),3)]):(p(),S(fe,{key:1},[u.value!==void 0?(p(),S("img",ht({key:0},f(l),{src:u.value,loading:v.loading,style:f(_),class:[f(s).e("inner"),f(w)&&f(s).e("preview"),r.value&&f(s).is("loading")],onClick:Be,onLoad:z,onError:q}),null,16,Hn)):U("v-if",!0),r.value?(p(),S("div",{key:1,class:F(f(s).e("wrapper"))},[De(v.$slots,"placeholder",{},()=>[E("div",{class:F(f(s).e("placeholder"))},null,2)])],2)):U("v-if",!0)],64)),f(w)?(p(),S(fe,{key:2},[d.value?(p(),re(f(Mn),{key:0,"z-index":v.zIndex,"initial-index":f(H),infinite:v.infinite,"zoom-rate":v.zoomRate,"url-list":v.previewSrcList,"hide-on-click-modal":v.hideOnClickModal,teleported:v.previewTeleported,"close-on-press-escape":v.closeOnPressEscape,onClose:We,onSwitch:ue},{default:V(()=>[v.$slots.viewer?(p(),S("div",Bn,[De(v.$slots,"viewer")])):U("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):U("v-if",!0)],64)):U("v-if",!0)],6))}});var Xn=vi(Yn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const qn=mi(Xn),ae="ElInfiniteScroll",jn=50,Kn=200,Gn=0,Zn={delay:{type:Number,default:Kn},distance:{type:Number,default:Gn},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},Ct=(n,e)=>Object.entries(Zn).reduce((i,[t,a])=>{var s,o;const{type:l,default:u}=a,c=n.getAttribute(`infinite-scroll-${t}`);let r=(o=(s=e[c])!=null?s:c)!=null?o:u;return r=r==="false"?!1:r,r=l(r),i[t]=Number.isNaN(r)?u:r,i},{}),wi=n=>{const{observer:e}=n[ae];e&&(e.disconnect(),delete n[ae].observer)},Jn=(n,e)=>{const{container:i,containerEl:t,instance:a,observer:s,lastScrollTop:o}=n[ae],{disabled:l,distance:u}=Ct(n,a),{clientHeight:c,scrollHeight:r,scrollTop:d}=t,h=d-o;if(n[ae].lastScrollTop=d,s||l||h<0)return;let m=!1;if(i===n)m=r-(c+d)<=u;else{const{clientTop:g,scrollHeight:T}=n,C=_n(n,t);m=d+c>=C+g+T-u}m&&e.call(a)};function rt(n,e){const{containerEl:i,instance:t}=n[ae],{disabled:a}=Ct(n,t);a||i.clientHeight===0||(i.scrollHeight<=i.clientHeight?e.call(t):wi(n))}const Qn={async mounted(n,e){const{instance:i,value:t}=e;Ji(t)||fn(ae,"'v-infinite-scroll' binding value must be a function"),await Qe();const{delay:a,immediate:s}=Ct(n,i),o=bi(n,!0),l=o===window?document.documentElement:o,u=Pe(Jn.bind(null,n,t),a);if(o){if(n[ae]={instance:i,container:o,containerEl:l,delay:a,cb:t,onScroll:u,lastScrollTop:l.scrollTop},s){const c=new MutationObserver(Pe(rt.bind(null,n,t),jn));n[ae].observer=c,c.observe(n,{childList:!0,subtree:!0}),rt(n,t)}o.addEventListener("scroll",u)}},unmounted(n){const{container:e,onScroll:i}=n[ae];e==null||e.removeEventListener("scroll",i),wi(n)},async updated(n){if(!n[ae])await Qe();else{const{containerEl:e,cb:i,observer:t}=n[ae];e.clientHeight&&t&&rt(n,i)}}},vt=Qn;vt.install=n=>{n.directive("InfiniteScroll",vt)};const ea=vt;function yi(){const n=R(!1);return{fetchData:async(i,t,a=()=>{},s=()=>{})=>{n.value=!0;const o=await i(t);n.value=!1;const{data:l,success:u,msg:c}=o;return u?(a(l),l):(gi.error(c),s(),!1)},loading:n}}const ta={class:"favorite-wrap"},ia={class:"edit-container"},na={class:"edit-form-item"},aa=E("p",{class:"label"},"标题",-1),sa={class:"edit-form-item"},oa=E("p",{class:"label"},"描述",-1),ra={class:"dialog-footer"},la={__name:"FavoriteWrap",setup(n){const e=be(),{loading:i,fetchData:t}=yi(),a=R(!1),s=O(()=>e.selectEdit),o=O(()=>e.editShow),l=R({title:"",desc_txt:""}),u=r=>{r()},c=async()=>{await t(Tt,{id:s.value.id,...l.value})&&(e.UPDATE_FAVORITE_BY_ID({id:s.value.id,...l.value}),a.value=!1,it({title:"操作成功",message:"已更新",type:"success"}))};return ce(()=>{a.value=o.value}),le(()=>o.value,r=>{r&&(l.value={title:s.value.title,desc_txt:s.value.desc_txt}),a.value=r}),le(()=>a.value,r=>{r||e.UPDATE_SELECT_EDIT(null),e.UPDATE_EDIT_SHOW(r)}),(r,d)=>{const h=vn,m=an,g=mn;return p(),S("div",ta,[De(r.$slots,"default"),y(g,{modelValue:a.value,"onUpdate:modelValue":d[2]||(d[2]=T=>a.value=T),title:"编辑收藏","before-close":u,"append-to-body":"",class:"edit-dialog",draggable:"","destroy-on-close":""},{footer:V(()=>[E("span",ra,[y(m,{onClick:c,loading:f(i)},{default:V(()=>[Qi("更新")]),_:1},8,["loading"])])]),default:V(()=>[E("div",ia,[E("div",na,[aa,y(h,{placeholder:"输入标题",modelValue:l.value.title,"onUpdate:modelValue":d[0]||(d[0]=T=>l.value.title=T)},null,8,["modelValue"])]),E("div",sa,[oa,y(h,{placeholder:"输入描述",modelValue:l.value.desc_txt,"onUpdate:modelValue":d[1]||(d[1]=T=>l.value.desc_txt=T)},null,8,["modelValue"])])])]),_:1},8,["modelValue"])])}}};/*!
 * Viewer.js v1.11.3
 * https://fengyuanchen.github.io/viewerjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-03-05T07:01:17.741Z
 */function Nt(n,e){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),i.push.apply(i,t)}return i}function It(n){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Nt(Object(i),!0).forEach(function(t){da(n,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Nt(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))})}return n}function mt(n){"@babel/helpers - typeof";return mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(n)}function ca(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function $t(n,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,Ei(t.key),t)}}function ua(n,e,i){return e&&$t(n.prototype,e),i&&$t(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n}function da(n,e,i){return e=Ei(e),e in n?Object.defineProperty(n,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[e]=i,n}function ha(n,e){if(typeof n!="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var t=i.call(n,e||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Ei(n){var e=ha(n,"string");return typeof e=="symbol"?e:String(e)}var Vt={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialCoverage:.9,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},fa='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>',st=typeof window<"u"&&typeof window.document<"u",me=st?window:{},Le=st&&me.document.documentElement?"ontouchstart"in me.document.documentElement:!1,St=st?"PointerEvent"in me:!1,D="viewer",Ke="move",Ti="switch",Re="zoom",Ye="".concat(D,"-active"),va="".concat(D,"-close"),Ge="".concat(D,"-fade"),gt="".concat(D,"-fixed"),ma="".concat(D,"-fullscreen"),Rt="".concat(D,"-fullscreen-exit"),ge="".concat(D,"-hide"),ga="".concat(D,"-hide-md-down"),pa="".concat(D,"-hide-sm-down"),_a="".concat(D,"-hide-xs-down"),Q="".concat(D,"-in"),Me="".concat(D,"-invisible"),Ae="".concat(D,"-loading"),ba="".concat(D,"-move"),Pt="".concat(D,"-open"),Ee="".concat(D,"-show"),Y="".concat(D,"-transition"),ze="click",pt="dblclick",Mt="dragstart",Ft="focusin",Ut="keydown",te="load",_e="error",wa=Le?"touchend touchcancel":"mouseup",ya=Le?"touchmove":"mousemove",Ea=Le?"touchstart":"mousedown",Ht=St?"pointerdown":Ea,Bt=St?"pointermove":ya,Wt=St?"pointerup pointercancel":wa,Yt="resize",ne="transitionend",Xt="wheel",qt="ready",jt="show",Kt="shown",Gt="hide",Zt="hidden",Jt="view",Fe="viewed",Qt="move",ei="moved",ti="rotate",ii="rotated",ni="scale",ai="scaled",si="zoom",oi="zoomed",ri="play",li="stop",nt="".concat(D,"Action"),xt=/\s\s*/,Xe=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function Ue(n){return typeof n=="string"}var Ta=Number.isNaN||me.isNaN;function W(n){return typeof n=="number"&&!Ta(n)}function Ie(n){return typeof n>"u"}function Oe(n){return mt(n)==="object"&&n!==null}var ka=Object.prototype.hasOwnProperty;function Se(n){if(!Oe(n))return!1;try{var e=n.constructor,i=e.prototype;return e&&i&&ka.call(i,"isPrototypeOf")}catch{return!1}}function N(n){return typeof n=="function"}function P(n,e){if(n&&N(e))if(Array.isArray(n)||W(n.length)){var i=n.length,t;for(t=0;t<i&&e.call(n,n[t],t,n)!==!1;t+=1);}else Oe(n)&&Object.keys(n).forEach(function(a){e.call(n,n[a],a,n)});return n}var Z=Object.assign||function(e){for(var i=arguments.length,t=new Array(i>1?i-1:0),a=1;a<i;a++)t[a-1]=arguments[a];return Oe(e)&&t.length>0&&t.forEach(function(s){Oe(s)&&Object.keys(s).forEach(function(o){e[o]=s[o]})}),e},Ca=/^(?:width|height|left|top|marginLeft|marginTop)$/;function oe(n,e){var i=n.style;P(e,function(t,a){Ca.test(a)&&W(t)&&(t+="px"),i[a]=t})}function Ia(n){return Ue(n)?n.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):n}function ke(n,e){return!n||!e?!1:n.classList?n.classList.contains(e):n.className.indexOf(e)>-1}function k(n,e){if(!(!n||!e)){if(W(n.length)){P(n,function(t){k(t,e)});return}if(n.classList){n.classList.add(e);return}var i=n.className.trim();i?i.indexOf(e)<0&&(n.className="".concat(i," ").concat(e)):n.className=e}}function A(n,e){if(!(!n||!e)){if(W(n.length)){P(n,function(i){A(i,e)});return}if(n.classList){n.classList.remove(e);return}n.className.indexOf(e)>=0&&(n.className=n.className.replace(e,""))}}function He(n,e,i){if(e){if(W(n.length)){P(n,function(t){He(t,e,i)});return}i?k(n,e):A(n,e)}}var Sa=/([a-z\d])([A-Z])/g;function Dt(n){return n.replace(Sa,"$1-$2").toLowerCase()}function xe(n,e){return Oe(n[e])?n[e]:n.dataset?n.dataset[e]:n.getAttribute("data-".concat(Dt(e)))}function _t(n,e,i){Oe(i)?n[e]=i:n.dataset?n.dataset[e]=i:n.setAttribute("data-".concat(Dt(e)),i)}var ki=function(){var n=!1;if(st){var e=!1,i=function(){},t=Object.defineProperty({},"once",{get:function(){return n=!0,e},set:function(s){e=s}});me.addEventListener("test",i,t),me.removeEventListener("test",i,t)}return n}();function $(n,e,i){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=i;e.trim().split(xt).forEach(function(s){if(!ki){var o=n.listeners;o&&o[s]&&o[s][i]&&(a=o[s][i],delete o[s][i],Object.keys(o[s]).length===0&&delete o[s],Object.keys(o).length===0&&delete n.listeners)}n.removeEventListener(s,a,t)})}function I(n,e,i){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},a=i;e.trim().split(xt).forEach(function(s){if(t.once&&!ki){var o=n.listeners,l=o===void 0?{}:o;a=function(){delete l[s][i],n.removeEventListener(s,a,t);for(var c=arguments.length,r=new Array(c),d=0;d<c;d++)r[d]=arguments[d];i.apply(n,r)},l[s]||(l[s]={}),l[s][i]&&n.removeEventListener(s,l[s][i],t),l[s][i]=a,n.listeners=l}n.addEventListener(s,a,t)})}function X(n,e,i,t){var a;return N(Event)&&N(CustomEvent)?a=new CustomEvent(e,It({bubbles:!0,cancelable:!0,detail:i},t)):(a=document.createEvent("CustomEvent"),a.initCustomEvent(e,!0,!0,i)),n.dispatchEvent(a)}function xa(n){var e=n.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}function Ze(n){var e=n.rotate,i=n.scaleX,t=n.scaleY,a=n.translateX,s=n.translateY,o=[];W(a)&&a!==0&&o.push("translateX(".concat(a,"px)")),W(s)&&s!==0&&o.push("translateY(".concat(s,"px)")),W(e)&&e!==0&&o.push("rotate(".concat(e,"deg)")),W(i)&&i!==1&&o.push("scaleX(".concat(i,")")),W(t)&&t!==1&&o.push("scaleY(".concat(t,")"));var l=o.length?o.join(" "):"none";return{WebkitTransform:l,msTransform:l,transform:l}}function Da(n){return Ue(n)?decodeURIComponent(n.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""}var lt=me.navigator&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(me.navigator.userAgent);function Ci(n,e,i){var t=document.createElement("img");if(n.naturalWidth&&!lt)return i(n.naturalWidth,n.naturalHeight),t;var a=document.body||document.documentElement;return t.onload=function(){i(t.width,t.height),lt||a.removeChild(t)},P(e.inheritedAttributes,function(s){var o=n.getAttribute(s);o!==null&&t.setAttribute(s,o)}),t.src=n.src,lt||(t.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",a.appendChild(t)),t}function qe(n){switch(n){case 2:return _a;case 3:return pa;case 4:return ga;default:return""}}function La(n){var e=It({},n),i=[];return P(n,function(t,a){delete e[a],P(e,function(s){var o=Math.abs(t.startX-s.startX),l=Math.abs(t.startY-s.startY),u=Math.abs(t.endX-s.endX),c=Math.abs(t.endY-s.endY),r=Math.sqrt(o*o+l*l),d=Math.sqrt(u*u+c*c),h=(d-r)/r;i.push(h)})}),i.sort(function(t,a){return Math.abs(t)<Math.abs(a)}),i[0]}function je(n,e){var i=n.pageX,t=n.pageY,a={endX:i,endY:t};return e?a:It({timeStamp:Date.now(),startX:i,startY:t},a)}function Aa(n){var e=0,i=0,t=0;return P(n,function(a){var s=a.startX,o=a.startY;e+=s,i+=o,t+=1}),e/=t,i/=t,{pageX:e,pageY:i}}var za={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initBody:function(){var e=this.element.ownerDocument,i=e.body||e.documentElement;this.body=i,this.scrollbarWidth=window.innerWidth-e.documentElement.clientWidth,this.initialBodyPaddingRight=i.style.paddingRight,this.initialBodyComputedPaddingRight=window.getComputedStyle(i).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var e=this.options,i=this.parent,t;e.inline&&(t={width:Math.max(i.offsetWidth,e.minWidth),height:Math.max(i.offsetHeight,e.minHeight)},this.parentData=t),(this.fulled||!t)&&(t=this.containerData),this.viewerData=Z({},t)},renderViewer:function(){this.options.inline&&!this.fulled&&oe(this.viewer,this.viewerData)},initList:function(){var e=this,i=this.element,t=this.options,a=this.list,s=[];a.innerHTML="",P(this.images,function(o,l){var u=o.src,c=o.alt||Da(u),r=e.getImageURL(o);if(u||r){var d=document.createElement("li"),h=document.createElement("img");P(t.inheritedAttributes,function(m){var g=o.getAttribute(m);g!==null&&h.setAttribute(m,g)}),t.navbar&&(h.src=u||r),h.alt=c,h.setAttribute("data-original-url",r||u),d.setAttribute("data-index",l),d.setAttribute("data-viewer-action","view"),d.setAttribute("role","button"),t.keyboard&&d.setAttribute("tabindex",0),d.appendChild(h),a.appendChild(d),s.push(d)}}),this.items=s,P(s,function(o){var l=o.firstElementChild,u,c;_t(l,"filled",!0),t.loading&&k(o,Ae),I(l,te,u=function(d){$(l,_e,c),t.loading&&A(o,Ae),e.loadImage(d)},{once:!0}),I(l,_e,c=function(){$(l,te,u),t.loading&&A(o,Ae)},{once:!0})}),t.transition&&I(i,Fe,function(){k(a,Y)},{once:!0})},renderList:function(){var e=this.index,i=this.items[e];if(i){var t=i.nextElementSibling,a=parseInt(window.getComputedStyle(t||i).marginLeft,10),s=i.offsetWidth,o=s+a;oe(this.list,Z({width:o*this.length-a},Ze({translateX:(this.viewerData.width-s)/2-o*e})))}},resetList:function(){var e=this.list;e.innerHTML="",A(e,Y),oe(e,Ze({translateX:0}))},initImage:function(e){var i=this,t=this.options,a=this.image,s=this.viewerData,o=this.footer.offsetHeight,l=s.width,u=Math.max(s.height-o,o),c=this.imageData||{},r;this.imageInitializing={abort:function(){r.onload=null}},r=Ci(a,t,function(d,h){var m=d/h,g=Math.max(0,Math.min(1,t.initialCoverage)),T=l,C=u;i.imageInitializing=!1,u*m>l?C=l/m:T=u*m,g=W(g)?g:.9,T=Math.min(T*g,d),C=Math.min(C*g,h);var b=(l-T)/2,_=(u-C)/2,w={left:b,top:_,x:b,y:_,width:T,height:C,oldRatio:1,ratio:T/d,aspectRatio:m,naturalWidth:d,naturalHeight:h},H=Z({},w);t.rotatable&&(w.rotate=c.rotate||0,H.rotate=0),t.scalable&&(w.scaleX=c.scaleX||1,w.scaleY=c.scaleY||1,H.scaleX=1,H.scaleY=1),i.imageData=w,i.initialImageData=H,e&&e()})},renderImage:function(e){var i=this,t=this.image,a=this.imageData;if(oe(t,Z({width:a.width,height:a.height,marginLeft:a.x,marginTop:a.y},Ze(a))),e)if((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&ke(t,Y)){var s=function(){i.imageRendering=!1,e()};this.imageRendering={abort:function(){$(t,ne,s)}},I(t,ne,s,{once:!0})}else e()},resetImage:function(){if(this.viewing||this.viewed){var e=this.image;this.viewing&&this.viewing.abort(),e.parentNode.removeChild(e),this.image=null}}},Oa={bind:function(){var e=this.options,i=this.viewer,t=this.canvas,a=this.element.ownerDocument;I(i,ze,this.onClick=this.click.bind(this)),I(i,Mt,this.onDragStart=this.dragstart.bind(this)),I(t,Ht,this.onPointerDown=this.pointerdown.bind(this)),I(a,Bt,this.onPointerMove=this.pointermove.bind(this)),I(a,Wt,this.onPointerUp=this.pointerup.bind(this)),I(a,Ut,this.onKeyDown=this.keydown.bind(this)),I(window,Yt,this.onResize=this.resize.bind(this)),e.zoomable&&e.zoomOnWheel&&I(i,Xt,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleOnDblclick&&I(t,pt,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var e=this.options,i=this.viewer,t=this.canvas,a=this.element.ownerDocument;$(i,ze,this.onClick),$(i,Mt,this.onDragStart),$(t,Ht,this.onPointerDown),$(a,Bt,this.onPointerMove),$(a,Wt,this.onPointerUp),$(a,Ut,this.onKeyDown),$(window,Yt,this.onResize),e.zoomable&&e.zoomOnWheel&&$(i,Xt,this.onWheel,{passive:!1,capture:!0}),e.toggleOnDblclick&&$(t,pt,this.onDblclick)}},Na={click:function(e){var i=this.options,t=this.imageData,a=e.target,s=xe(a,nt);switch(!s&&a.localName==="img"&&a.parentElement.localName==="li"&&(a=a.parentElement,s=xe(a,nt)),Le&&e.isTrusted&&a===this.canvas&&clearTimeout(this.clickCanvasTimeout),s){case"mix":this.played?this.stop():i.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.pointerMoved||this.hide();break;case"view":this.view(xe(a,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(i.loop);break;case"play":this.play(i.fullscreen);break;case"next":this.next(i.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-t.scaleX||-1);break;case"flip-vertical":this.scaleY(-t.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(e){e.preventDefault(),this.viewed&&e.target===this.image&&(Le&&e.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(e.isTrusted?e:e.detail&&e.detail.originalEvent))},load:function(){var e=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var i=this.element,t=this.options,a=this.image,s=this.index,o=this.viewerData;A(a,Me),t.loading&&A(this.canvas,Ae),a.style.cssText="height:0;"+"margin-left:".concat(o.width/2,"px;")+"margin-top:".concat(o.height/2,"px;")+"max-width:none!important;position:relative;width:0;",this.initImage(function(){He(a,ba,t.movable),He(a,Y,t.transition),e.renderImage(function(){e.viewed=!0,e.viewing=!1,N(t.viewed)&&I(i,Fe,t.viewed,{once:!0}),X(i,Fe,{originalImage:e.images[s],index:s,image:a},{cancelable:!1})})})},loadImage:function(e){var i=e.target,t=i.parentNode,a=t.offsetWidth||30,s=t.offsetHeight||50,o=!!xe(i,"filled");Ci(i,this.options,function(l,u){var c=l/u,r=a,d=s;s*c>a?o?r=s*c:d=a/c:o?d=a/c:r=s*c,oe(i,Z({width:r,height:d},Ze({translateX:(a-r)/2,translateY:(s-d)/2})))})},keydown:function(e){var i=this.options;if(i.keyboard){var t=e.keyCode||e.which||e.charCode;switch(t){case 13:this.viewer.contains(e.target)&&this.click(e);break}if(this.fulled)switch(t){case 27:this.played?this.stop():i.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.played&&this.playing?this.playing.prev():this.prev(i.loop);break;case 38:e.preventDefault(),this.zoom(i.zoomRatio,!0);break;case 39:this.played&&this.playing?this.playing.next():this.next(i.loop);break;case 40:e.preventDefault(),this.zoom(-i.zoomRatio,!0);break;case 48:case 49:e.ctrlKey&&(e.preventDefault(),this.toggle());break}}},dragstart:function(e){e.target.localName==="img"&&e.preventDefault()},pointerdown:function(e){var i=this.options,t=this.pointers,a=e.buttons,s=e.button;if(this.pointerMoved=!1,!(!this.viewed||this.showing||this.viewing||this.hiding||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(W(a)&&a!==1||W(s)&&s!==0||e.ctrlKey))){e.preventDefault(),e.changedTouches?P(e.changedTouches,function(l){t[l.identifier]=je(l)}):t[e.pointerId||0]=je(e);var o=i.movable?Ke:!1;i.zoomOnTouch&&i.zoomable&&Object.keys(t).length>1?o=Re:i.slideOnTouch&&(e.pointerType==="touch"||e.type==="touchstart")&&this.isSwitchable()&&(o=Ti),i.transition&&(o===Ke||o===Re)&&A(this.image,Y),this.action=o}},pointermove:function(e){var i=this.pointers,t=this.action;!this.viewed||!t||(e.preventDefault(),e.changedTouches?P(e.changedTouches,function(a){Z(i[a.identifier]||{},je(a,!0))}):Z(i[e.pointerId||0]||{},je(e,!0)),this.change(e))},pointerup:function(e){var i=this,t=this.options,a=this.action,s=this.pointers,o;e.changedTouches?P(e.changedTouches,function(l){o=s[l.identifier],delete s[l.identifier]}):(o=s[e.pointerId||0],delete s[e.pointerId||0]),a&&(e.preventDefault(),t.transition&&(a===Ke||a===Re)&&k(this.image,Y),this.action=!1,Le&&a!==Re&&o&&Date.now()-o.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),t.toggleOnDblclick&&this.viewed&&e.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){X(i.image,pt,{originalEvent:e})},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){i.imageClicked=!1},500)):(this.imageClicked=!1,t.backdrop&&t.backdrop!=="static"&&e.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){X(i.canvas,ze,{originalEvent:e})},50)))))},resize:function(){var e=this;if(!(!this.isShown||this.hiding)&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage()}),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)){this.stop();return}P(this.player.getElementsByTagName("img"),function(i){I(i,te,e.loadImage.bind(e),{once:!0}),X(i,te)})}},wheel:function(e){var i=this;if(this.viewed&&(e.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50);var t=Number(this.options.zoomRatio)||.1,a=1;e.deltaY?a=e.deltaY>0?1:-1:e.wheelDelta?a=-e.wheelDelta/120:e.detail&&(a=e.detail>0?1:-1),this.zoom(-a*t,!0,null,e)}}},$a={show:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.element,t=this.options;if(t.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(e),this;if(N(t.show)&&I(i,jt,t.show,{once:!0}),X(i,jt)===!1||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var a=this.viewer;if(A(a,ge),a.setAttribute("role","dialog"),a.setAttribute("aria-labelledby",this.title.id),a.setAttribute("aria-modal",!0),a.removeAttribute("aria-hidden"),t.transition&&!e){var s=this.shown.bind(this);this.transitioning={abort:function(){$(a,ne,s),A(a,Q)}},k(a,Y),a.initialOffsetWidth=a.offsetWidth,I(a,ne,s,{once:!0}),k(a,Q)}else k(a,Q),this.shown();return this},hide:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.element,a=this.options;if(a.inline||this.hiding||!(this.isShown||this.showing))return this;if(N(a.hide)&&I(t,Gt,a.hide,{once:!0}),X(t,Gt)===!1)return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var s=this.viewer,o=this.image,l=function(){A(s,Q),e.hidden()};if(a.transition&&!i){var u=function r(d){d&&d.target===s&&($(s,ne,r),e.hidden())},c=function(){ke(s,Y)?(I(s,ne,u),A(s,Q)):l()};this.transitioning={abort:function(){e.viewed&&ke(o,Y)?$(o,ne,c):ke(s,Y)&&$(s,ne,u)}},this.viewed&&ke(o,Y)?(I(o,ne,c,{once:!0}),this.zoomTo(0,!1,null,null,!0)):c()}else l();return this},view:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.initialViewIndex;if(i=Number(i)||0,this.hiding||this.played||i<0||i>=this.length||this.viewed&&i===this.index)return this;if(!this.isShown)return this.index=i,this.show();this.viewing&&this.viewing.abort();var t=this.element,a=this.options,s=this.title,o=this.canvas,l=this.items[i],u=l.querySelector("img"),c=xe(u,"originalUrl"),r=u.getAttribute("alt"),d=document.createElement("img");if(P(a.inheritedAttributes,function(C){var b=u.getAttribute(C);b!==null&&d.setAttribute(C,b)}),d.src=c,d.alt=r,N(a.view)&&I(t,Jt,a.view,{once:!0}),X(t,Jt,{originalImage:this.images[i],index:i,image:d})===!1||!this.isShown||this.hiding||this.played)return this;var h=this.items[this.index];h&&(A(h,Ye),h.removeAttribute("aria-selected")),k(l,Ye),l.setAttribute("aria-selected",!0),a.focus&&l.focus(),this.image=d,this.viewed=!1,this.index=i,this.imageData={},k(d,Me),a.loading&&k(o,Ae),o.innerHTML="",o.appendChild(d),this.renderList(),s.innerHTML="";var m=function(){var b=e.imageData,_=Array.isArray(a.title)?a.title[1]:a.title;s.innerHTML=Ia(N(_)?_.call(e,d,b):"".concat(r," (").concat(b.naturalWidth," × ").concat(b.naturalHeight,")"))},g,T;return I(t,Fe,m,{once:!0}),this.viewing={abort:function(){$(t,Fe,m),d.complete?e.imageRendering?e.imageRendering.abort():e.imageInitializing&&e.imageInitializing.abort():(d.src="",$(d,te,g),e.timeout&&clearTimeout(e.timeout))}},d.complete?this.load():(I(d,te,g=function(){$(d,_e,T),e.load()},{once:!0}),I(d,_e,T=function(){$(d,te,g),e.timeout&&(clearTimeout(e.timeout),e.timeout=!1),A(d,Me),a.loading&&A(e.canvas,Ae)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){A(d,Me),e.timeout=!1},1e3)),this},prev:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.index-1;return i<0&&(i=e?this.length-1:0),this.view(i),this},next:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.length-1,t=this.index+1;return t>i&&(t=e?0:i),this.view(t),this},move:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,t=this.imageData;return this.moveTo(Ie(e)?e:t.x+Number(e),Ie(i)?i:t.y+Number(i)),this},moveTo:function(e){var i=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=this.element,o=this.options,l=this.imageData;if(e=Number(e),t=Number(t),this.viewed&&!this.played&&o.movable){var u=l.x,c=l.y,r=!1;if(W(e)?r=!0:e=u,W(t)?r=!0:t=c,r){if(N(o.move)&&I(s,Qt,o.move,{once:!0}),X(s,Qt,{x:e,y:t,oldX:u,oldY:c,originalEvent:a})===!1)return this;l.x=e,l.y=t,l.left=e,l.top=t,this.moving=!0,this.renderImage(function(){i.moving=!1,N(o.moved)&&I(s,ei,o.moved,{once:!0}),X(s,ei,{x:e,y:t,oldX:u,oldY:c,originalEvent:a},{cancelable:!1})})}}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e)),this},rotateTo:function(e){var i=this,t=this.element,a=this.options,s=this.imageData;if(e=Number(e),W(e)&&this.viewed&&!this.played&&a.rotatable){var o=s.rotate;if(N(a.rotate)&&I(t,ti,a.rotate,{once:!0}),X(t,ti,{degree:e,oldDegree:o})===!1)return this;s.rotate=e,this.rotating=!0,this.renderImage(function(){i.rotating=!1,N(a.rotated)&&I(t,ii,a.rotated,{once:!0}),X(t,ii,{degree:e,oldDegree:o},{cancelable:!1})})}return this},scaleX:function(e){return this.scale(e,this.imageData.scaleY),this},scaleY:function(e){return this.scale(this.imageData.scaleX,e),this},scale:function(e){var i=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,a=this.element,s=this.options,o=this.imageData;if(e=Number(e),t=Number(t),this.viewed&&!this.played&&s.scalable){var l=o.scaleX,u=o.scaleY,c=!1;if(W(e)?c=!0:e=l,W(t)?c=!0:t=u,c){if(N(s.scale)&&I(a,ni,s.scale,{once:!0}),X(a,ni,{scaleX:e,scaleY:t,oldScaleX:l,oldScaleY:u})===!1)return this;o.scaleX=e,o.scaleY=t,this.scaling=!0,this.renderImage(function(){i.scaling=!1,N(s.scaled)&&I(a,ai,s.scaled,{once:!0}),X(a,ai,{scaleX:e,scaleY:t,oldScaleX:l,oldScaleY:u},{cancelable:!1})})}}return this},zoom:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,s=this.imageData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(s.width*e/s.naturalWidth,i,t,a),this},zoomTo:function(e){var i=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=this.element,u=this.options,c=this.pointers,r=this.imageData,d=r.x,h=r.y,m=r.width,g=r.height,T=r.naturalWidth,C=r.naturalHeight;if(e=Math.max(0,e),W(e)&&this.viewed&&!this.played&&(o||u.zoomable)){if(!o){var b=Math.max(.01,u.minZoomRatio),_=Math.min(100,u.maxZoomRatio);e=Math.min(Math.max(e,b),_)}if(s)switch(s.type){case"wheel":u.zoomRatio>=.055&&e>.95&&e<1.05&&(e=1);break;case"pointermove":case"touchmove":case"mousemove":e>.99&&e<1.01&&(e=1);break}var w=T*e,H=C*e,B=w-m,x=H-g,z=r.ratio;if(N(u.zoom)&&I(l,si,u.zoom,{once:!0}),X(l,si,{ratio:e,oldRatio:z,originalEvent:s})===!1)return this;if(this.zooming=!0,s){var q=xa(this.viewer),j=c&&Object.keys(c).length>0?Aa(c):{pageX:s.pageX,pageY:s.pageY};r.x-=B*((j.pageX-q.left-d)/m),r.y-=x*((j.pageY-q.top-h)/g)}else Se(a)&&W(a.x)&&W(a.y)?(r.x-=B*((a.x-d)/m),r.y-=x*((a.y-h)/g)):(r.x-=B/2,r.y-=x/2);r.left=r.x,r.top=r.y,r.width=w,r.height=H,r.oldRatio=z,r.ratio=e,this.renderImage(function(){i.zooming=!1,N(u.zoomed)&&I(l,oi,u.zoomed,{once:!0}),X(l,oi,{ratio:e,oldRatio:z,originalEvent:s},{cancelable:!1})}),t&&this.tooltip()}return this},play:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!this.isShown||this.played)return this;var t=this.element,a=this.options;if(N(a.play)&&I(t,ri,a.play,{once:!0}),X(t,ri)===!1)return this;var s=this.player,o=this.loadImage.bind(this),l=[],u=0,c=0;if(this.played=!0,this.onLoadWhenPlay=o,i&&this.requestFullscreen(i),k(s,Ee),P(this.items,function(h,m){var g=h.querySelector("img"),T=document.createElement("img");T.src=xe(g,"originalUrl"),T.alt=g.getAttribute("alt"),T.referrerPolicy=g.referrerPolicy,u+=1,k(T,Ge),He(T,Y,a.transition),ke(h,Ye)&&(k(T,Q),c=m),l.push(T),I(T,te,o,{once:!0}),s.appendChild(T)}),W(a.interval)&&a.interval>0){var r=function h(){clearTimeout(e.playing.timeout),A(l[c],Q),c-=1,c=c>=0?c:u-1,k(l[c],Q),e.playing.timeout=setTimeout(h,a.interval)},d=function h(){clearTimeout(e.playing.timeout),A(l[c],Q),c+=1,c=c<u?c:0,k(l[c],Q),e.playing.timeout=setTimeout(h,a.interval)};u>1&&(this.playing={prev:r,next:d,timeout:setTimeout(d,a.interval)})}return this},stop:function(){var e=this;if(!this.played)return this;var i=this.element,t=this.options;if(N(t.stop)&&I(i,li,t.stop,{once:!0}),X(i,li)===!1)return this;var a=this.player;return clearTimeout(this.playing.timeout),this.playing=!1,this.played=!1,P(a.getElementsByTagName("img"),function(s){$(s,te,e.onLoadWhenPlay)}),A(a,Ee),a.innerHTML="",this.exitFullscreen(),this},full:function(){var e=this,i=this.options,t=this.viewer,a=this.image,s=this.list;return!this.isShown||this.played||this.fulled||!i.inline?this:(this.fulled=!0,this.open(),k(this.button,Rt),i.transition&&(A(s,Y),this.viewed&&A(a,Y)),k(t,gt),t.setAttribute("role","dialog"),t.setAttribute("aria-labelledby",this.title.id),t.setAttribute("aria-modal",!0),t.removeAttribute("style"),oe(t,{zIndex:i.zIndex}),i.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=Z({},this.containerData),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){i.transition&&setTimeout(function(){k(a,Y),k(s,Y)},0)})}),this)},exit:function(){var e=this,i=this.options,t=this.viewer,a=this.image,s=this.list;return!this.isShown||this.played||!this.fulled||!i.inline?this:(this.fulled=!1,this.close(),A(this.button,Rt),i.transition&&(A(s,Y),this.viewed&&A(a,Y)),i.focus&&this.clearEnforceFocus(),t.removeAttribute("role"),t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-modal"),A(t,gt),oe(t,{zIndex:i.zIndexInline}),this.viewerData=Z({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){i.transition&&setTimeout(function(){k(a,Y),k(s,Y)},0)})}),this)},tooltip:function(){var e=this,i=this.options,t=this.tooltipBox,a=this.imageData;return!this.viewed||this.played||!i.tooltip?this:(t.textContent="".concat(Math.round(a.ratio*100),"%"),this.tooltipping?clearTimeout(this.tooltipping):i.transition?(this.fading&&X(t,ne),k(t,Ee),k(t,Ge),k(t,Y),t.removeAttribute("aria-hidden"),t.initialOffsetWidth=t.offsetWidth,k(t,Q)):(k(t,Ee),t.removeAttribute("aria-hidden")),this.tooltipping=setTimeout(function(){i.transition?(I(t,ne,function(){A(t,Ee),A(t,Ge),A(t,Y),t.setAttribute("aria-hidden",!0),e.fading=!1},{once:!0}),A(t,Q),e.fading=!0):(A(t,Ee),t.setAttribute("aria-hidden",!0)),e.tooltipping=!1},1e3),this)},toggle:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.imageData.ratio===1?this.zoomTo(this.imageData.oldRatio,!0,null,e):this.zoomTo(1,!0,null,e),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=Z({},this.initialImageData),this.renderImage()),this},update:function(){var e=this,i=this.element,t=this.options,a=this.isImg;if(a&&!i.parentNode)return this.destroy();var s=[];if(P(a?[i]:i.querySelectorAll("img"),function(c){N(t.filter)?t.filter.call(e,c)&&s.push(c):e.getImageURL(c)&&s.push(c)}),!s.length)return this;if(this.images=s,this.length=s.length,this.ready){var o=[];if(P(this.items,function(c,r){var d=c.querySelector("img"),h=s[r];h&&d?(h.src!==d.src||h.alt!==d.alt)&&o.push(r):o.push(r)}),oe(this.list,{width:"auto"}),this.initList(),this.isShown)if(this.length){if(this.viewed){var l=o.indexOf(this.index);if(l>=0)this.viewed=!1,this.view(Math.max(Math.min(this.index-l,this.length-1),0));else{var u=this.items[this.index];k(u,Ye),u.setAttribute("aria-selected",!0)}}}else this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""}else this.build();return this},destroy:function(){var e=this.element,i=this.options;return e[D]?(this.destroyed=!0,this.ready?(this.played&&this.stop(),i.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):i.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),i.inline||$(e,ze,this.onStart),e[D]=void 0,this):this}},Va={getImageURL:function(e){var i=this.options.url;return Ue(i)?i=e.getAttribute(i):N(i)?i=i.call(this,e):i="",i},enforceFocus:function(){var e=this;this.clearEnforceFocus(),I(document,Ft,this.onFocusin=function(i){var t=e.viewer,a=i.target;if(!(a===document||a===t||t.contains(a))){for(;a;){if(a.getAttribute("tabindex")!==null||a.getAttribute("aria-modal")==="true")return;a=a.parentElement}t.focus()}})},clearEnforceFocus:function(){this.onFocusin&&($(document,Ft,this.onFocusin),this.onFocusin=null)},open:function(){var e=this.body;k(e,Pt),this.scrollbarWidth>0&&(e.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px"))},close:function(){var e=this.body;A(e,Pt),this.scrollbarWidth>0&&(e.style.paddingRight=this.initialBodyPaddingRight)},shown:function(){var e=this.element,i=this.options,t=this.viewer;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,i.focus&&(t.focus(),this.enforceFocus()),N(i.shown)&&I(e,Kt,i.shown,{once:!0}),X(e,Kt)!==!1&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var e=this.element,i=this.options,t=this.viewer;i.fucus&&this.clearEnforceFocus(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.close(),this.unbind(),k(t,ge),t.removeAttribute("role"),t.removeAttribute("aria-labelledby"),t.removeAttribute("aria-modal"),t.setAttribute("aria-hidden",!0),this.resetList(),this.resetImage(),this.hiding=!1,this.destroyed||(N(i.hidden)&&I(e,Zt,i.hidden,{once:!0}),X(e,Zt,null,{cancelable:!1}))},requestFullscreen:function(e){var i=this.element.ownerDocument;if(this.fulled&&!(i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement)){var t=i.documentElement;t.requestFullscreen?Se(e)?t.requestFullscreen(e):t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}},exitFullscreen:function(){var e=this.element.ownerDocument;this.fulled&&(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())},change:function(e){var i=this.options,t=this.pointers,a=t[Object.keys(t)[0]];if(a){var s=a.endX-a.startX,o=a.endY-a.startY;switch(this.action){case Ke:(s!==0||o!==0)&&(this.pointerMoved=!0,this.move(s,o,e));break;case Re:this.zoom(La(t),!1,null,e);break;case Ti:{this.action="switched";var l=Math.abs(s);l>1&&l>Math.abs(o)&&(this.pointers={},s>1?this.prev(i.loop):s<-1&&this.next(i.loop));break}}P(t,function(u){u.startX=u.endX,u.startY=u.endY})}},isSwitchable:function(){var e=this.imageData,i=this.viewerData;return this.length>1&&e.x>=0&&e.y>=0&&e.width<=i.width&&e.height<=i.height}},Ra=me.Viewer,Pa=function(n){return function(){return n+=1,n}}(-1),Ii=function(){function n(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(ca(this,n),!e||e.nodeType!==1)throw new Error("The first argument is required and must be an element.");this.element=e,this.options=Z({},Vt,Se(i)&&i),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.moving=!1,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.rotating=!1,this.scaling=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.pointerMoved=!1,this.id=Pa(),this.init()}return ua(n,[{key:"init",value:function(){var i=this,t=this.element,a=this.options;if(!t[D]){t[D]=this,a.focus&&!a.keyboard&&(a.focus=!1);var s=t.localName==="img",o=[];if(P(s?[t]:t.querySelectorAll("img"),function(c){N(a.filter)?a.filter.call(i,c)&&o.push(c):i.getImageURL(c)&&o.push(c)}),this.isImg=s,this.length=o.length,this.images=o,this.initBody(),Ie(document.createElement(D).style.transition)&&(a.transition=!1),a.inline){var l=0,u=function(){if(l+=1,l===i.length){var r;i.initializing=!1,i.delaying={abort:function(){clearTimeout(r)}},r=setTimeout(function(){i.delaying=!1,i.build()},0)}};this.initializing={abort:function(){P(o,function(r){r.complete||($(r,te,u),$(r,_e,u))})}},P(o,function(c){if(c.complete)u();else{var r,d;I(c,te,r=function(){$(c,_e,d),u()},{once:!0}),I(c,_e,d=function(){$(c,te,r),u()},{once:!0})}})}else I(t,ze,this.onStart=function(c){var r=c.target;r.localName==="img"&&(!N(a.filter)||a.filter.call(i,r))&&i.view(i.images.indexOf(r))})}}},{key:"build",value:function(){if(!this.ready){var i=this.element,t=this.options,a=i.parentNode,s=document.createElement("div");s.innerHTML=fa;var o=s.querySelector(".".concat(D,"-container")),l=o.querySelector(".".concat(D,"-title")),u=o.querySelector(".".concat(D,"-toolbar")),c=o.querySelector(".".concat(D,"-navbar")),r=o.querySelector(".".concat(D,"-button")),d=o.querySelector(".".concat(D,"-canvas"));if(this.parent=a,this.viewer=o,this.title=l,this.toolbar=u,this.navbar=c,this.button=r,this.canvas=d,this.footer=o.querySelector(".".concat(D,"-footer")),this.tooltipBox=o.querySelector(".".concat(D,"-tooltip")),this.player=o.querySelector(".".concat(D,"-player")),this.list=o.querySelector(".".concat(D,"-list")),o.id="".concat(D).concat(this.id),l.id="".concat(D,"Title").concat(this.id),k(l,t.title?qe(Array.isArray(t.title)?t.title[0]:t.title):ge),k(c,t.navbar?qe(t.navbar):ge),He(r,ge,!t.button),t.keyboard&&r.setAttribute("tabindex",0),t.backdrop&&(k(o,"".concat(D,"-backdrop")),!t.inline&&t.backdrop!=="static"&&_t(d,nt,"hide")),Ue(t.className)&&t.className&&t.className.split(xt).forEach(function(w){k(o,w)}),t.toolbar){var h=document.createElement("ul"),m=Se(t.toolbar),g=Xe.slice(0,3),T=Xe.slice(7,9),C=Xe.slice(9);m||k(u,qe(t.toolbar)),P(m?t.toolbar:Xe,function(w,H){var B=m&&Se(w),x=m?Dt(H):w,z=B&&!Ie(w.show)?w.show:w;if(!(!z||!t.zoomable&&g.indexOf(x)!==-1||!t.rotatable&&T.indexOf(x)!==-1||!t.scalable&&C.indexOf(x)!==-1)){var q=B&&!Ie(w.size)?w.size:w,j=B&&!Ie(w.click)?w.click:w,K=document.createElement("li");t.keyboard&&K.setAttribute("tabindex",0),K.setAttribute("role","button"),k(K,"".concat(D,"-").concat(x)),N(j)||_t(K,nt,x),W(z)&&k(K,qe(z)),["small","large"].indexOf(q)!==-1?k(K,"".concat(D,"-").concat(q)):x==="play"&&k(K,"".concat(D,"-large")),N(j)&&I(K,ze,j),h.appendChild(K)}}),u.appendChild(h)}else k(u,ge);if(!t.rotatable){var b=u.querySelectorAll('li[class*="rotate"]');k(b,Me),P(b,function(w){u.appendChild(w)})}if(t.inline)k(r,ma),oe(o,{zIndex:t.zIndexInline}),window.getComputedStyle(a).position==="static"&&oe(a,{position:"relative"}),a.insertBefore(o,i.nextSibling);else{k(r,va),k(o,gt),k(o,Ge),k(o,ge),oe(o,{zIndex:t.zIndex});var _=t.container;Ue(_)&&(_=i.ownerDocument.querySelector(_)),_||(_=this.body),_.appendChild(o)}if(t.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,N(t.ready)&&I(i,qt,t.ready,{once:!0}),X(i,qt)===!1){this.ready=!1;return}this.ready&&t.inline&&this.view(this.index)}}}],[{key:"noConflict",value:function(){return window.Viewer=Ra,n}},{key:"setDefaults",value:function(i){Z(Vt,Se(i)&&i)}}]),n}();Z(Ii.prototype,za,Oa,Na,$a,Va);const Ma={__name:"CustomImage",props:{src:{type:String,default:""},preview:{type:Object,default:()=>[]},initialIndex:{type:Number,default:0}},emits:["load"],setup(n,{emit:e}){const i=n,t=()=>{if(!i.preview.length)return;const s=document.createElement("div");i.preview.forEach(l=>{var u=document.createElement("img");u.setAttribute("src",l),u.setAttribute("data-src",l),s.appendChild(u)}),new Ii(s,{initialViewIndex:i.initialIndex,minZoomRatio:.2,navbar:!1}).show()},a=()=>{e("load")};return ce(()=>{}),(s,o)=>{const l=tt("lazy");return p(),S("div",{class:"CustomImage",onClick:t},[ee(E("img",{draggable:"false",onLoad:a,onError:a},null,544),[[l,n.src]])])}}},Fa={key:1,class:"flex-center image-wrap"},Ua={key:2,class:"text"},Ha={class:"text-inner"},Ba={key:3,class:"url ov-1"},Wa={key:4,class:"video"},Ya={key:1},Xa=["src","poster"],qa={__name:"PrePane",setup(n){const e=ft("redrawVueMasonry"),i=be(),t=ft("favoriteData"),a=R(0),s=R(!1),o=O(()=>{var m;return((m=i.favoriteList)==null?void 0:m.filter(g=>g.type==="img"))||[]}),l=O(()=>o.value.findIndex(m=>m.id===t.value.id)||0),u=O(()=>o.value.map(m=>m.displayUrl)),c=()=>{e()},r=()=>{const m={text:()=>{Hi(t.value.content,()=>{gi.success("已复制")})},url:()=>{kt.confirm(`是否前往${t.value.title}?`,"注意",{confirmButtonText:"立即前往",cancelButtonText:"取消"}).then(()=>{window.open(t.value.content,"_blank")}).catch(()=>{})}};m[t.value.type]&&m[t.value.type]()},d=async m=>{await Tt({id:t.value.id,nsfw:m})},h=()=>{s.value||(s.value=!0)};return ce(()=>{a.value=t.value.nsfw}),le(()=>t.value.nsfw,m=>{a.value=m}),(m,g)=>{const T=gn,C=wt("v-icon"),b=G,_=tt("lazy");return p(),S("div",{class:"PrePane",onClick:r},[f(t).type!=="video"?(p(),S("div",{key:0,class:"nswf",onClick:g[1]||(g[1]=se(()=>{},["stop"]))},[y(T,{modelValue:a.value,"onUpdate:modelValue":g[0]||(g[0]=w=>a.value=w),"inactive-value":1,size:"small",style:{"--el-switch-on-color":"#5dca91","--el-switch-off-color":"#ff4242"},"active-value":0,"inline-prompt":"","active-text":"SFW","inactive-text":"NSFW",onChange:d},null,8,["modelValue"])])):U("",!0),f(t).type==="img"?(p(),S("div",Fa,[y(Ma,{src:f(t).thumbnailUrl,preview:u.value,"initial-index":l.value,onLoad:c},null,8,["src","preview","initial-index"])])):U("",!0),f(t).type==="text"?(p(),S("div",Ua,[E("div",Ha,ve(f(t).content),1)])):U("",!0),f(t).type==="url"?(p(),S("div",Ba,ve(f(t).title),1)):U("",!0),f(t).type==="video"?(p(),S("div",Wa,[s.value?U("",!0):(p(),S("div",{key:0,class:"play-btn",onClick:h},[y(b,{class:"play-icon",size:60,color:"#fff"},{default:V(()=>[y(C,{icon:"mdi:check"})]),_:1})])),s.value?(p(),S("video",{key:2,src:f(t).videoPath,controls:"",loop:"",muted:"",poster:f(t).cover,autoplay:""},null,8,Xa)):ee((p(),S("img",Ya,null,512)),[[_,f(t).cover]])])):U("",!0)])}}};const ja={class:"ToolPane"},Ka={class:"ago"},Ga={key:0,class:"footer"},Za={key:0,class:"flex-center"},Ja=["href","title"],Qa={class:"tool-bar"},es={__name:"ToolPane",setup(n){const e=be(),i=ft("favoriteData"),t=R(null),{loading:a,fetchData:s}=yi(),o=async()=>{await s(Tt,{id:i.value.id,is_show:1})&&(it({title:"操作成功",message:"已恢复",type:"success"}),e.UPDATE_FAVORITE_LIST(e.favoriteList.filter(r=>r.id!==i.value.id)))},l=()=>{kt.confirm(`${i.value.is_show===0?"删除后不可恢复,":""}确定要删除吗?`,"",{confirmButtonText:"删除",cancelButtonText:"取消"}).then(async()=>{const c=i.value.is_show===0?"FavoriteDelUsePOST":"FavoriteUpdateUsePOST",r={id:i.value.id};i.value.is_show&&(r.is_show=0),await s(sn[c],r)&&(it({title:"操作成功",message:i.value.is_show?"移除成功, 可在回收站找回":"已删除",type:"success"}),e.UPDATE_FAVORITE_LIST(e.favoriteList.filter(h=>h.id!==i.value.id)))}).catch(()=>{})},u=()=>{e.UPDATE_SELECT_EDIT(i.value),e.UPDATE_EDIT_SHOW(!0)};return ce(()=>{t.value=Bi(i.value.origin)}),(c,r)=>{const d=wt("v-icon"),h=G,m=qn;return p(),S("div",ja,[E("p",Ka,ve(f(Wi)(f(i).update_date)),1),f(i).type!=="video"?(p(),S("div",Ga,[t.value?(p(),S("div",Za,[y(m,{class:"favicon",src:t.value.origin+"/favicon.ico",lazy:"",fit:"cover",draggable:"false"},{error:V(()=>[y(h,{size:18,color:"slateblue"},{default:V(()=>[y(d,{icon:"ic:baseline-web"})]),_:1})]),_:1},8,["src"]),E("a",{href:f(i).origin,class:"ov-1",title:f(i).origin,target:"_blank"},ve(t.value.host),9,Ja)])):U("",!0),E("div",Qa,[f(i).is_show===1?(p(),re(h,{key:0,size:18,class:"edit",title:"编辑",onClick:se(u,["stop"])},{default:V(()=>[y(d,{icon:"mdi:pencil"})]),_:1},8,["onClick"])):(p(),re(h,{key:1,size:18,class:"edit restore",title:"还原",onClick:se(o,["stop"])},{default:V(()=>[y(d,{icon:"mdi:backup-restore"})]),_:1},8,["onClick"])),y(h,{size:18,class:"edit",title:"删除",onClick:se(l,["stop"])},{default:V(()=>[y(d,{icon:"mdi:delete-forever"})]),_:1},8,["onClick"])])])):U("",!0)])}}},ts={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},is=E("path",{fill:"currentColor",d:"M77.248 415.04a64 64 0 0 1 90.496 0l226.304 226.304L846.528 188.8a64 64 0 1 1 90.56 90.496l-543.04 543.04l-316.8-316.8a64 64 0 0 1 0-90.496z"},null,-1),ns=[is];function as(n,e){return p(),S("svg",ts,ns)}const ss={name:"ep-select",render:as};const os=["onClick"],rs={__name:"CheckBox",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(n,{emit:e}){const i=n,t=R(!1),a=()=>{t.value=!t.value,e("change",t.value)};return ce(()=>{t.value=i.modelValue}),le(()=>i.modelValue,s=>{t.value=s}),le(()=>t.value,s=>{e("update:modelValue",s)}),(s,o)=>{const l=ss,u=G;return p(),S("div",{class:F(["check-box",{checked:t.value}]),onClick:se(a,["stop"])},[y(u,{size:18,color:t.value?"#fff":"#333"},{default:V(()=>[y(l)]),_:1},8,["color"])],10,os)}}},ls=yt(rs,[["__scopeId","data-v-712dfda3"]]),cs=["draggable","drag-over"],ci={__name:"FavoriteCard",props:{data:{type:Object,default:()=>({})}},setup(n){const e=n;en("favoriteData",O(()=>e.data));const i=be(),t=R(!1),a=R(!1),s=R(""),o=O(()=>i.dragIn),l=O(()=>i.dragData),u=O(()=>i.checkList),c=()=>{Array.from(document.querySelectorAll("div[drag-over]")).forEach(b=>{b.toggleAttribute("drag-over",!1)}),s.value=""},r=b=>{if(e.data.type==="video")return;i.UPDATE_DRAGIN(!0),a.value=!0;const{offsetX:_,offsetY:w}=b;i.UPDATE_DRAG_DATA(e.data),setTimeout(()=>{const H=document.querySelector(".favorite-card[dragging]");H.style.transform=`translate(${_}px, ${w}px)`},0)},d=b=>{e.data.type!=="video"&&(i.UPDATE_DRAG_DATA(null),i.UPDATE_DRAGIN(!1),setTimeout(()=>{a.value=!1,c()},0))},h=b=>{b.preventDefault();const{target:_,layerX:w}=b;Yi(_,"drag")||(w<=_.clientWidth&&w>=0?w>_.clientWidth/2?s.value!=="right"&&(s.value="right"):s.value!=="left"&&(s.value="left"):s.value&&(s.value=""))},m=b=>{b.preventDefault()},g=b=>{b.preventDefault(),s.value=""},T=async b=>{if(b.preventDefault(),console.log(`${l.value.id} 放置到 ${e.data.id} ${s.value==="left"?"前":"后"}`),l.value.id===e.data.id)return;const _={id:l.value.id,targetId:e.data.id,position:s.value==="left"?1:0,dragPosition:s.value},w=await on(_),{success:H,data:B}=w;H&&i.UPDATE_FAVORITE_LIST(Xi(i.favoriteList,_.id,_.targetId,_.dragPosition))},C=()=>{u.value.length&&(t.value=!t.value)};return ce(()=>{t.value=u.value.some(b=>b.id===e.data.id)}),le(()=>t.value,b=>{b?u.value.every(_=>_.id!==e.data.id)&&i.UPDATE_CHECK_LIST([...u.value,e.data]):i.UPDATE_CHECK_LIST(u.value.filter(_=>_.id!==e.data.id))}),le(()=>u.value,b=>{t.value=b.some(_=>_.id===e.data.id)}),(b,_)=>(p(),S("div",{class:F(["favorite-card",{drag:a.value,"video-card":e.data.type==="video",checked:t.value,"check-mode":u.value.length}]),draggable:e.data.type!=="video",onDragstart:r,onDragend:d,onDragenter:m,onDragleave:g,onDragover:h,onDrop:T,"drag-over":s.value,onClick:_[1]||(_[1]=se(()=>{},["stop"]))},[e.data.type!=="video"?(p(),re(ls,{key:0,class:"card-check",modelValue:t.value,"onUpdate:modelValue":_[0]||(_[0]=w=>t.value=w)},null,8,["modelValue"])):U("",!0),u.value.length?(p(),S("div",{key:1,class:F(["check-mask",{"no-events":o.value}]),onClick:C},null,2)):U("",!0),E("div",{class:F(["drag-title ov-1",{"no-events":o.value}])},ve(e.data.title),3),y(qa,{class:F(["favorite-card--preview",{"no-events":o.value}])},null,8,["class"]),y(es,{class:F(["favorite-card--desc",{"no-events":o.value}])},null,8,["class"])],42,cs))}},us={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ds=E("path",{fill:"currentColor",d:"M160 832h704a32 32 0 1 1 0 64H160a32 32 0 1 1 0-64zm384-253.696l236.288-236.352l45.248 45.248L508.8 704L192 387.2l45.248-45.248L480 584.704V128h64v450.304z"},null,-1),hs=[ds];function fs(n,e){return p(),S("svg",us,hs)}const vs={name:"ep-download",render:fs},ms={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},gs=E("path",{fill:"currentColor",d:"M512 64h64v192h-64V64zm0 576h64v192h-64V640zM160 480v-64h192v64H160zm576 0v-64h192v64H736zM249.856 199.04l45.248-45.184L430.848 289.6L385.6 334.848L249.856 199.104zM657.152 606.4l45.248-45.248l135.744 135.744l-45.248 45.248L657.152 606.4zM114.048 923.2L68.8 877.952l316.8-316.8l45.248 45.248l-316.8 316.8zM702.4 334.848L657.152 289.6l135.744-135.744l45.248 45.248L702.4 334.848z"},null,-1),ps=[gs];function _s(n,e){return p(),S("svg",ms,ps)}const bs={name:"ep-magic-stick",render:_s},ws={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},ys=E("path",{fill:"currentColor",d:"M224 160a64 64 0 0 0-64 64v576a64 64 0 0 0 64 64h576a64 64 0 0 0 64-64V224a64 64 0 0 0-64-64H224zm0-64h576a128 128 0 0 1 128 128v576a128 128 0 0 1-128 128H224A128 128 0 0 1 96 800V224A128 128 0 0 1 224 96z"},null,-1),Es=E("path",{fill:"currentColor",d:"M384 416a64 64 0 1 0 0-128a64 64 0 0 0 0 128zm0 64a128 128 0 1 1 0-256a128 128 0 0 1 0 256z"},null,-1),Ts=E("path",{fill:"currentColor",d:"M480 320h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32zm160 416a64 64 0 1 0 0-128a64 64 0 0 0 0 128zm0 64a128 128 0 1 1 0-256a128 128 0 0 1 0 256z"},null,-1),ks=E("path",{fill:"currentColor",d:"M288 640h256q32 0 32 32t-32 32H288q-32 0-32-32t32-32z"},null,-1),Cs=[ys,Es,Ts,ks];function Is(n,e){return p(),S("svg",ws,Cs)}const Ss={name:"ep-set-up",render:Is},xs={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Ds=E("path",{fill:"currentColor",d:"M764.288 214.592L512 466.88L259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512L214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),Ls=[Ds];function As(n,e){return p(),S("svg",xs,Ls)}const zs={name:"ep-close",render:As},Os={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Ns=E("path",{fill:"currentColor",d:"M406.656 706.944L195.84 496.256a32 32 0 1 0-45.248 45.248l256 256l512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),$s=[Ns];function Vs(n,e){return p(),S("svg",Os,$s)}const Rs={name:"ep-check",render:Vs},Ps={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},Ms=E("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),Fs=[Ms];function Us(n,e){return p(),S("svg",Ps,Fs)}const Hs={name:"ep-loading",render:Us};const ct={__name:"IconButton",props:{loading:{type:Boolean,default:!1},success:{type:Boolean,default:!1},error:{type:Boolean,default:!1}},setup(n){const e=n;return(i,t)=>{const a=Hs,s=Rs,o=zs,l=G;return p(),re(l,{size:18,class:F(["order-icon",{"is-loading":e.loading,success:e.success,error:e.error}])},{default:V(()=>[ee(E("span",null,[De(i.$slots,"default")],512),[[pe,!e.loading&&!e.success&&!e.error]]),ee(y(a,null,null,512),[[pe,e.loading]]),ee(y(s,null,null,512),[[pe,e.success]]),ee(y(o,null,null,512),[[pe,e.error]])]),_:3},8,["class"])}}};const Bs={class:"sort-bar"},Ws={class:"tabs"},Ys=["onClick"],Xs={class:"sort-btn"},qs={class:"sort-btn"},js={class:"sort-btn"},Ks={key:1,class:"get-cover sort-btn"},Gs={__name:"SortBar",emits:["typeChange","sort"],setup(n,{emit:e}){const i=be(),t=Et(),a=[{label:"ALL",key:""},{label:"IMG",key:"img"},{label:"TEXT",key:"text"},{label:"URL",key:"url"}],s=O(()=>t.params.type==="video"),o=R(0),l=R(!1),u=R(!1),c=R(!1),r=R(!1),d=()=>{i.UPDATE_WATERFALL(!i.waterfall)},h=()=>{l.value=!l.value,e("sort",l.value)},m=(C,b)=>{o.value=C,e("typeChange",b)},g=async()=>{if(u.value||c.value||r.value)return;u.value=!0;const C=await rn();u.value=!1,c.value=C.success,r.value=!C.success,setTimeout(()=>{c.value=!1,r.value=!1},1e3)},T=async()=>{if(u.value||c.value||r.value)return;u.value=!0;const C=await ln();u.value=!1,c.value=C.success,r.value=!C.success,setTimeout(()=>{c.value=!1,r.value=!1},1e3)};return(C,b)=>{const _=Ss,w=bs,H=wt("v-icon"),B=G,x=vs;return p(),S("div",Bs,[s.value?U("",!0):(p(),S(fe,{key:0},[E("div",Ws,[(p(),S(fe,null,et(a,(z,q)=>E("div",{class:F(["tab-item",{active:o.value===q}]),key:z.label,onClick:j=>m(q,z)},ve(z.label),11,Ys)),64))]),E("div",Xs,[y(ct,{onClick:d},{default:V(()=>[y(_)]),_:1})]),E("div",qs,[y(ct,ht({onClick:T},{loading:u.value,success:c.value,error:r.value}),{default:V(()=>[y(w)]),_:1},16)]),E("div",js,[y(B,{size:18,class:F(["order-icon",{desc:l.value}]),onClick:h},{default:V(()=>[y(H,{icon:"humbleicons:exchange-horizontal"})]),_:1},8,["class"])])],64)),s.value?(p(),S("div",Ks,[y(ct,ht({onClick:g},{loading:u.value,success:c.value,error:r.value}),{default:V(()=>[y(x)]),_:1},16)])):U("",!0)])}}},Zs=yt(Gs,[["__scopeId","data-v-05cb868b"]]);const Js={class:"check-tip"},Qs=["onClick"],eo={class:"popup-right"},to=["onClick"],io={__name:"Check",setup(n){const e=Et(),i=be(),t=R(!1),a=O(()=>i.checkList),s=O(()=>i.favoriteList),o=O(()=>e.params.type),l=(c=!0)=>{i.UPDATE_CHECK_LIST(c?s.value:[])},u=(c=!0)=>{kt.confirm(`确定要${c?"删除":"恢复"}吗?`,"",{confirmButtonText:c?"删除":"恢复",cancelButtonText:"取消"}).then(async()=>{const r=a.value.map(h=>h.id);await tn(cn,{ids:r,is_show:c?0:1,del:o.value==="recovery"&&c?1:0})&&(it({title:"操作成功",type:"success"}),i.UPDATE_CHECK_LIST([]),i.UPDATE_FAVORITE_LIST(s.value.filter(h=>!r.includes(h.id))))}).catch(()=>{})};return le(()=>a.value,c=>{t.value=!!c.length}),ce(()=>{document.body.addEventListener("click",()=>{a.value&&i.UPDATE_CHECK_LIST([])})}),(c,r)=>(p(),re(_i,{to:"body"},[y(pi,{name:"slide"},{default:V(()=>[t.value?(p(),S("div",{key:0,class:"popup",onClick:r[2]||(r[2]=se(()=>{},["stop"]))},[E("div",Js,"已选择 "+ve(a.value.length)+" 项, 当前页共加载 "+ve(s.value.length)+" 项",1),E("span",{class:"check-all",onClick:se(l,["stop"])},"全选",8,Qs),E("span",{class:"check-all",onClick:r[0]||(r[0]=se(d=>l(!1),["stop"]))},"取消"),E("div",eo,[o.value==="recovery"?(p(),S("span",{key:0,class:"check-all restore",onClick:r[1]||(r[1]=d=>u(!1))},"恢复")):U("",!0),E("span",{class:"check-all del",onClick:se(u,["stop"])},"删除",8,to)])])):U("",!0)]),_:1})]))}},no=yt(io,[["__scopeId","data-v-aa5b62fb"]]);const ao={class:"collect"},so={key:0,class:"card-wrap waterfall","transition-duration":"0.25s","item-selector":".favorite-card"},oo={key:1,class:"card-wrap"},ro={class:"tip"},lo={class:"tip"},mo={__name:"collect",setup(n){const e=be(),i=Et(),{fetchData:t,loading:a,finished:s,page:o,pageSize:l}=nn(),u=O(()=>i.params.type==="video"),c=O(()=>e.sort),r=O(()=>e.type),d=O(()=>e.nsfw),h=O(()=>e.waterfall),m=O(()=>e.favoriteList),g=_=>{e.UPDATE_SORT(_),C()},T=({key:_})=>{e.UPDATE_TYPE(_),C()},C=()=>{o.value=1,e.UPDATE_FAVORITE_LIST([]),s.value=!1,b()},b=async()=>{const _=u.value?un:dn,w={pageSize:l.value,page:o.value,nsfw:d.value,type:r.value,sort:c.value,tid:isNaN(parseInt(i.params.tid))?"":i.params.tid,is_show:i.params.type==="recovery"?0:1};t(_,w),u.value&&(s.value=!0)};return ce(()=>{e.UPDATE_FAVORITE_LIST([])}),(_,w)=>{const H=tt("masonry-tile"),B=tt("masonry"),x=ea;return p(),S(fe,null,[E("div",ao,[y(Zs,{onTypeChange:T,onSort:g}),ee((p(),re(la,{"infinite-scroll-disabled":f(s)||f(a),"infinite-scroll-distance":0},{default:V(()=>[h.value?ee((p(),S("div",so,[(p(!0),S(fe,null,et(m.value,z=>ee((p(),re(ci,{key:z.id,data:z},null,8,["data"])),[[H]])),128))])),[[B]]):(p(),S("div",oo,[(p(!0),S(fe,null,et(m.value,z=>(p(),re(ci,{key:z.id,data:z},null,8,["data"]))),128))])),ee(E("p",ro,"加载中...",512),[[pe,f(a)]]),ee(E("p",lo,"没有了",512),[[pe,f(s)&&!f(a)]])]),_:1},8,["infinite-scroll-disabled"])),[[x,b]])]),y(no)],64)}}};export{mo as default};
